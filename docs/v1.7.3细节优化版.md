# v1.7.3 细节优化版

**发布日期**: 2024-12-04 21:25  
**版本**: v1.7.3

## 🎯 本次优化

### 1. 删除"真实数据"字样 ✅

**修改前**:
```
AKShare个股新闻 (10条真实数据)
财联社快讯 (10条真实数据)
微博热议 (50条真实数据)
```

**修改后**:
```
AKShare个股新闻 (10条数据)
财联社快讯 (10条数据)
微博热议 (50条数据)
```

**原因**: "真实数据"字样冗余，简化为"条数据"更简洁

### 2. 补全新闻源映射 ✅

**问题**: 新闻面板显示原始键名

**显示问题**:
```
ths_news          ❌
global_news_sina  ❌
futu_news         ❌
morning_news      ❌
global_news_em    ❌
```

**修复**: 添加缺失的映射

```javascript
const SOURCE_NAME_MAP = {
  // 原有映射...
  'akshare_stock_news': 'AKShare个股新闻',
  'cls_telegraph': '财联社快讯',
  'weibo_hot': '微博热议',
  
  // 新增映射 ✅
  'morning_news': '财经早餐（东方财富）',
  'global_news_em': '东方财富全球财经',
  'global_news_sina': '新浪全球财经',
  'futu_news': '富途财经新闻',
  'ths_news': '同花顺财经新闻'
}
```

**修复后显示**:
```
同花顺财经新闻      ✅
新浪全球财经        ✅
富途财经新闻        ✅
财经早餐（东方财富）✅
东方财富全球财经    ✅
```

## 📊 完整的数据源映射表

| 后端键名 | 前端显示名称 | 状态 |
|---------|-------------|------|
| `akshare_stock_news` | AKShare个股新闻 | ✅ |
| `realtime_news` | 实时新闻聚合器（东方财富） | ✅ |
| `cls_telegraph` | 财联社快讯 | ✅ |
| `weibo_hot` | 微博热议 | ✅ |
| `morning_news` | 财经早餐（东方财富） | ✅ 新增 |
| `global_news_em` | 东方财富全球财经 | ✅ 新增 |
| `global_news_sina` | 新浪全球财经 | ✅ 新增 |
| `futu_news` | 富途财经新闻 | ✅ 新增 |
| `ths_news` | 同花顺财经新闻 | ✅ 新增 |
| `stock_info_cjzc_em` | 东方财富平台的财经早餐资讯 | ✅ |
| `stock_info_global_em` | 东方财富的全球综合财经新闻 | ✅ |
| `stock_info_global_sina` | 新浪财经 | ✅ |
| `stock_info_global_futu` | 富途牛牛的全球财经新闻 | ✅ |
| `stock_info_global_ths` | 同花顺平台的全球财经新闻 | ✅ |
| `stock_news_em` | 东方财富网个股新闻资讯 | ✅ |
| `stock_info_broker_sina` | 新浪财经证券原创新闻 | ✅ |

## 📋 修改的文件

| 文件 | 修改内容 |
|------|---------|
| `AgentCard.vue` | 删除"真实数据"字样 |
| `AnalysisView.vue` | 添加5个新的数据源映射 |

## 🎨 显示效果对比

### 智能体卡片

**修改前**:
```
📊 参考数据  12个来源 | 123条数据
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
东方财富 (贵州茅台：最新市场动态分析)
新浪财经 (贵州茅台所属行业板块走势分析)
雪球社区 (贵州茅台投资者情绪报告)
AKShare个股新闻 (10条真实数据)  ← 冗余
财联社快讯 (10条真实数据)      ← 冗余
微博热议 (50条真实数据)        ← 冗余
```

**修改后**:
```
📊 参考数据  12个来源 | 123条数据
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
东方财富 (贵州茅台：最新市场动态分析)
新浪财经 (贵州茅台所属行业板块走势分析)
雪球社区 (贵州茅台投资者情绪报告)
AKShare个股新闻 (10条数据)  ✅ 简洁
财联社快讯 (10条数据)      ✅ 简洁
微博热议 (50条数据)        ✅ 简洁
```

### 新闻面板

**修改前**:
```
📰 新闻舆情透明面板
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
ths_news          ❌ 原始键名
global_news_sina  ❌ 原始键名
futu_news         ❌ 原始键名
AKShare个股新闻   ✅ 已映射
财联社快讯        ✅ 已映射
```

**修改后**:
```
📰 新闻舆情透明面板
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
同花顺财经新闻    ✅ 友好名称
新浪全球财经      ✅ 友好名称
富途财经新闻      ✅ 友好名称
AKShare个股新闻   ✅ 友好名称
财联社快讯        ✅ 友好名称
```

## ✅ 验证清单

- [ ] 智能体卡片不再显示"真实数据"
- [ ] 新闻面板显示中文名称
- [ ] 所有数据源都有友好名称
- [ ] 没有原始键名显示

## 🚀 立即生效

```bash
Ctrl + F5  # 强制刷新浏览器
```

## 💡 技术说明

### 为什么需要映射？

**后端返回的数据**:
```javascript
{
  sources: {
    'ths_news': { status: 'success', count: 10, data: [...] },
    'futu_news': { status: 'success', count: 10, data: [...] }
  }
}
```

**前端显示**:
```javascript
// 没有映射
显示: ths_news  ❌

// 有映射
const friendlyName = SOURCE_NAME_MAP['ths_news']
显示: 同花顺财经新闻  ✅
```

### 映射的好处

1. **用户友好**: 显示中文名称，易于理解
2. **专业性**: 显示完整的来源名称
3. **一致性**: 所有数据源统一格式
4. **可维护**: 集中管理名称映射

## 🎉 总结

本次优化：
1. ✅ 删除冗余的"真实数据"字样
2. ✅ 补全5个缺失的数据源映射
3. ✅ 提升用户体验
4. ✅ 保持界面简洁

**现在所有数据源都显示友好的中文名称了！**🎉
