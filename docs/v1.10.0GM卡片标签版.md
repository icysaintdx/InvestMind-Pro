# v1.10.0 GM卡片标签版

**发布日期**: 2024-12-05 00:00  
**版本**: v1.10.0

## 🎯 核心功能

### GM卡片内标签切换

在**投资决策总经理（GM）**的卡片中，提供专业版和白话版两种查看方式，通过标签页切换。

## 📊 设计方案

### 视觉效果

```
┌──────────────────────────────────────────┐
│ 👑 投资决策总经理              ⚙️ 🔍    │
├──────────────────────────────────────────┤
│ [📊 专业版] [📢 白话版]                  │  ← 标签栏
├──────────────────────────────────────────┤
│                                          │
│  （当前选中标签的内容）                   │
│                                          │
│  专业版：完整的投资决策分析               │
│  白话版：通俗易懂的买卖建议               │
│                                          │
└──────────────────────────────────────────┘
```

### 特点

1. **只在GM卡片显示** - 其他智能体不受影响
2. **默认显示专业版** - 保持专业性
3. **一键切换** - 点击标签即可切换
4. **视觉区分** - 白话版有绿色背景

## 💻 技术实现

### 1. GM提示词改造

使用特殊标记分隔两个版本：

```javascript
gm: `作为投资决策总经理，给出最终投资决策。

请按以下格式输出，用特殊标记分隔两个版本：

===PROFESSIONAL_START===
## 专业投资决策
### 1. 投资建议
- 决策结论：（买入/卖出/观望）
- 目标价位：
- 仓位建议：
- 投资周期：
### 2. 决策依据
（专业的投资逻辑）
### 3. 风险评估
（专业的风险分析）
===PROFESSIONAL_END===

===SIMPLE_START===
## 白话投资建议
### 📊 【能买不？】
（明确回答）
### 💰 【价格指引】
- 什么价格买合适？
- 什么价格可以卖？
- 买了能放多久？
### ⚠️ 【风险提醒】
1. （大白话）
2. （大白话）
3. （大白话）
### 📝 【操作步骤】
第1步：
第2步：
第3步：
===SIMPLE_END===

注意：必须同时输出两个版本
`
```

### 2. 解析输出

在AgentCard中添加computed属性：

```javascript
parsedGMContent() {
  if (this.agent.id !== 'gm' || !this.output) {
    return { professional: this.output, simple: '', hasSimple: false }
  }
  
  const professionalMatch = this.output.match(/===PROFESSIONAL_START===([\s\S]*?)===PROFESSIONAL_END===/)
  const simpleMatch = this.output.match(/===SIMPLE_START===([\s\S]*?)===SIMPLE_END===/)
  
  return {
    professional: professionalMatch ? professionalMatch[1].trim() : this.output,
    simple: simpleMatch ? simpleMatch[1].trim() : '',
    hasSimple: !!simpleMatch
  }
}
```

### 3. 标签栏UI

```vue
<!-- GM专用标签栏 -->
<div v-if="agent.id === 'gm' && parsedGMContent.hasSimple && output" class="gm-tab-bar">
  <button 
    @click="currentView = 'professional'" 
    :class="{active: currentView === 'professional'}"
    class="gm-tab-btn"
  >
    📊 专业版
  </button>
  <button 
    @click="currentView = 'simple'" 
    :class="{active: currentView === 'simple'}"
    class="gm-tab-btn"
  >
    📢 白话版
  </button>
</div>
```

### 4. 双版本内容

```vue
<!-- GM的双版本内容 -->
<div v-else-if="agent.id === 'gm' && parsedGMContent.hasSimple && output" class="gm-content">
  <!-- 专业版 -->
  <div v-show="currentView === 'professional'" class="professional-content">
    <TypeWriter :text="parsedGMContent.professional" :speed="20" />
  </div>
  <!-- 白话版 -->
  <div v-show="currentView === 'simple'" class="simple-content">
    <TypeWriter :text="parsedGMContent.simple" :speed="20" />
  </div>
</div>
```

### 5. 样式设计

```css
/* 标签栏 */
.gm-tab-bar {
  display: flex;
  gap: 8px;
  padding: 10px 15px;
  border-bottom: 1px solid rgba(71, 85, 105, 0.3);
  background: rgba(30, 41, 59, 0.3);
}

.gm-tab-btn {
  flex: 1;
  padding: 8px 16px;
  background: rgba(51, 65, 85, 0.5);
  border-radius: 8px;
  color: #94a3b8;
  cursor: pointer;
  transition: all 0.3s ease;
}

.gm-tab-btn.active {
  background: rgba(59, 130, 246, 0.3);
  color: #60a5fa;
  font-weight: 600;
  box-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
}

/* 白话版背景 */
.simple-content {
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.1) 100%);
  padding: 15px;
  border-radius: 10px;
}

.simple-content strong {
  color: #10b981;
  font-weight: 600;
}
```

## 📋 修改的文件

| 文件 | 修改内容 |
|------|---------|
| `AnalysisView.vue` | 修改GM提示词，使用特殊标记 |
| `AnalysisView.vue` | 删除enableSimpleSummary状态 |
| `AnalysisView.vue` | 删除StyleConfig相关props |
| `AgentCard.vue` | 添加currentView状态 |
| `AgentCard.vue` | 添加parsedGMContent计算属性 |
| `AgentCard.vue` | 添加GM标签栏UI |
| `AgentCard.vue` | 添加双版本内容显示 |
| `AgentCard.vue` | 添加GM标签栏样式 |
| `StyleConfig.vue` | 删除白话总结开关 |

## 🎯 智能体职责

### 投资决策总经理（GM）
- **职责**: 最终投资决策
- **输出**: 专业版 + 白话版
- **地位**: 最终决策者

### 量化交易员（Trader）
- **职责**: 执行计划制定
- **输出**: 具体交易策略
- **地位**: 执行者

## ✅ 优势

1. **直观清晰** - 一眼看到两个版本
2. **方便快捷** - 点击即切换
3. **视觉区分** - 白话版有绿色背景
4. **不干扰** - 其他智能体不受影响
5. **专业优先** - 默认显示专业版

## 🎨 视觉对比

### 专业版（默认）
- 深色背景
- 标准字体
- 专业术语
- 严谨格式

### 白话版
- 绿色渐变背景
- 较大字体
- 通俗语言
- 友好格式

## 🚀 使用方式

1. 开始分析
2. 等待GM完成
3. 查看GM卡片
4. 点击"白话版"标签
5. 查看通俗易懂的建议

## 📝 与其他方案对比

| 特性 | 卡片标签 | 报告标签 | 弹窗 | 开关 |
|------|---------|---------|------|------|
| 直观性 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ |
| 便捷性 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
| 空间占用 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| 清晰度 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |

## 🎉 总结

本次更新：
1. ✅ GM卡片内标签切换
2. ✅ 专业版和白话版分离
3. ✅ 默认显示专业版
4. ✅ 一键切换查看
5. ✅ 视觉清晰区分
6. ✅ 其他智能体不受影响

**现在GM卡片既专业又友好，满足所有用户的需求！**🎉
