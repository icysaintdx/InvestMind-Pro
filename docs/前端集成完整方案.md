# å‰ç«¯é›†æˆå®Œæ•´æ–¹æ¡ˆ

**æ—¶é—´**: 2025-12-16 00:25  
**çŠ¶æ€**: ğŸ“ å¾…æ‰§è¡Œ  

---

## ğŸš¨ å½“å‰çŠ¶å†µ

### åç«¯çŠ¶æ€
```
âœ… 13ä¸ªç­–ç•¥å·²å®ç°
âœ… å›æµ‹å¼•æ“å·²å®Œæˆ
âœ… APIç«¯ç‚¹å·²åˆ›å»º
âœ… è·¯ç”±å·²æ³¨å†Œ
âœ… æœåŠ¡å™¨æ­£å¸¸è¿è¡Œ
```

### å‰ç«¯çŠ¶æ€
```
âŒ ç­–ç•¥åˆ—è¡¨ä¾ç„¶ç©ºç™½
âŒ å›æµ‹åŠŸèƒ½æ— æ³•ä½¿ç”¨
âŒ æ¨¡æ‹Ÿäº¤æ˜“æœªå®ç°
âŒ å‰ç«¯ä»£ç æœªä¿®æ”¹
```

---

## ğŸ¯ é—®é¢˜æ ¹æº

**æˆ‘ä»¬åªä¿®å¤äº†åç«¯ï¼Œä½†å‰ç«¯ä»£ç ä¸€è¡Œéƒ½æ²¡æ”¹ï¼**

å‰ç«¯Vueç»„ä»¶è¿˜åœ¨è°ƒç”¨**æ—§çš„APIè·¯å¾„**æˆ–**ä¸å­˜åœ¨çš„ç«¯ç‚¹**ï¼Œæ‰€ä»¥çœ‹ä¸åˆ°ä»»ä½•å˜åŒ–ã€‚

---

## ğŸ“‹ éœ€è¦ä¿®æ”¹çš„å‰ç«¯æ–‡ä»¶

### 1. BacktestView.vueï¼ˆç­–ç•¥å›æµ‹é¡µé¢ï¼‰

**æ–‡ä»¶**: `alpha-council-vue/src/views/BacktestView.vue`

**éœ€è¦ä¿®æ”¹çš„åœ°æ–¹**:

#### ä¿®æ”¹1: APIåŸºç¡€URL
```javascript
// å½“å‰ï¼ˆé”™è¯¯ï¼‰
const API_BASE = '/api/backtest'

// åº”è¯¥æ”¹ä¸º
const API_BASE = 'http://localhost:8000/api/backtest'
```

#### ä¿®æ”¹2: åŠ è½½ç­–ç•¥åˆ—è¡¨
```javascript
// å½“å‰ä»£ç ï¼ˆç¬¬294-299è¡Œï¼‰
const loadStrategies = async () => {
  try {
    const response = await axios.get('/api/backtest/strategies')
    strategies.value = response.data.strategies.map(s => ({
      ...s,
      icon: getStrategyIcon(s.category)
    }))
  } catch (error) {
    console.error('åŠ è½½ç­–ç•¥åˆ—è¡¨å¤±è´¥:', error)
  }
}

// åº”è¯¥æ”¹ä¸º
const loadStrategies = async () => {
  try {
    const response = await axios.get('http://localhost:8000/api/backtest/strategies')
    
    // æ£€æŸ¥å“åº”æ ¼å¼
    if (response.data && response.data.strategies) {
      strategies.value = response.data.strategies
      console.log(`âœ… åŠ è½½äº†${strategies.value.length}ä¸ªç­–ç•¥`)
    } else {
      console.error('âŒ APIè¿”å›æ ¼å¼ä¸æ­£ç¡®:', response.data)
    }
  } catch (error) {
    console.error('âŒ åŠ è½½ç­–ç•¥åˆ—è¡¨å¤±è´¥:', error)
    // æ˜¾ç¤ºé”™è¯¯æç¤º
    alert('åŠ è½½ç­–ç•¥åˆ—è¡¨å¤±è´¥: ' + error.message)
  }
}
```

#### ä¿®æ”¹3: è¿è¡Œå›æµ‹
```javascript
// å½“å‰ä»£ç 
const runBacktest = async () => {
  // ... éªŒè¯ä»£ç  ...
  
  try {
    const response = await axios.post('/api/backtest/run', {
      stock_code: config.stockCode,
      strategy_name: config.strategyId,
      // ...
    })
  } catch (error) {
    console.error('å›æµ‹å¤±è´¥:', error)
  }
}

// åº”è¯¥æ”¹ä¸º
const runBacktest = async () => {
  if (!config.strategyId) {
    alert('è¯·é€‰æ‹©ç­–ç•¥')
    return
  }
  
  isRunning.value = true
  loadingMessage.value = 'æ­£åœ¨åŠ è½½æ•°æ®...'
  
  try {
    const response = await axios.post('http://localhost:8000/api/backtest/run', {
      stock_code: config.stockCode,
      strategy_name: config.strategyId,
      start_date: config.startDate,
      end_date: config.endDate,
      initial_capital: config.initialCapital,
      strategy_params: strategyParams
    })
    
    // å¤„ç†å“åº”
    if (response.data.success) {
      // å¦‚æœæ˜¯å¼‚æ­¥ä»»åŠ¡
      if (response.data.task_id) {
        await pollBacktestResult(response.data.task_id)
      } else {
        backtestResult.value = response.data.result
      }
    }
  } catch (error) {
    console.error('âŒ å›æµ‹å¤±è´¥:', error)
    alert('å›æµ‹å¤±è´¥: ' + error.message)
  } finally {
    isRunning.value = false
  }
}
```

---

### 2. æ¨¡æ‹Ÿäº¤æ˜“é¡µé¢

**æ–‡ä»¶**: `alpha-council-vue/src/PaperTrading/index.vue`

**å½“å‰çŠ¶æ€**: æ˜¾ç¤º"åŠŸèƒ½å¼€å‘ä¸­"

**éœ€è¦å®ç°**:
1. åˆ›å»ºæ¨¡æ‹Ÿè´¦æˆ·UI
2. æŒä»“åˆ—è¡¨å±•ç¤º
3. ä¸‹å•åŠŸèƒ½
4. äº¤æ˜“è®°å½•

---

### 3. LLMé…ç½®é¡µé¢ï¼ˆæ–°å»ºï¼‰

**æ–‡ä»¶**: `alpha-council-vue/src/views/LLMConfigView.vue`ï¼ˆéœ€è¦åˆ›å»ºï¼‰

**åŠŸèƒ½**:
1. æ˜¾ç¤ºæ‰€æœ‰LLMä»»åŠ¡é…ç½®
2. ä¿®æ”¹æ¨¡å‹é€‰æ‹©
3. è°ƒæ•´å‚æ•°
4. ä¿å­˜é…ç½®

---

## ğŸ”§ ç«‹å³æ‰§è¡Œæ­¥éª¤

### æ­¥éª¤1: è°ƒè¯•APIè¿”å›æ ¼å¼ï¼ˆ5åˆ†é’Ÿï¼‰

```bash
# è¿è¡Œè°ƒè¯•è„šæœ¬
python test_api_debug.py
```

è¿™ä¼šå‘Šè¯‰æˆ‘ä»¬APIå®é™…è¿”å›äº†ä»€ä¹ˆæ ¼å¼ã€‚

---

### æ­¥éª¤2: ä¿®å¤å‰ç«¯APIè°ƒç”¨ï¼ˆ30åˆ†é’Ÿï¼‰

**ä¿®æ”¹æ–‡ä»¶**: `BacktestView.vue`

1. æ‰“å¼€æ–‡ä»¶
2. æ‰¾åˆ° `loadStrategies` å‡½æ•°
3. ä¿®æ”¹API URLä¸ºå®Œæ•´è·¯å¾„
4. æ·»åŠ é”™è¯¯å¤„ç†å’Œæ—¥å¿—
5. ä¿å­˜å¹¶åˆ·æ–°æµè§ˆå™¨

---

### æ­¥éª¤3: æµ‹è¯•ç­–ç•¥åˆ—è¡¨æ˜¾ç¤ºï¼ˆ5åˆ†é’Ÿï¼‰

1. æ‰“å¼€æµè§ˆå™¨: `http://localhost:8080`
2. è¿›å…¥"ç­–ç•¥å›æµ‹"é¡µé¢
3. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
4. æŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯
5. æ£€æŸ¥ç­–ç•¥åˆ—è¡¨æ˜¯å¦æ˜¾ç¤º

---

### æ­¥éª¤4: ä¿®å¤å›æµ‹è¿è¡ŒåŠŸèƒ½ï¼ˆ30åˆ†é’Ÿï¼‰

1. ä¿®æ”¹ `runBacktest` å‡½æ•°
2. ä¿®å¤APIè°ƒç”¨
3. å¤„ç†å“åº”æ•°æ®
4. æ˜¾ç¤ºå›æµ‹ç»“æœ

---

## ğŸ“Š å®Œæ•´ä¿®å¤æ—¶é—´è¡¨

| ä»»åŠ¡ | æ—¶é—´ | ä¼˜å…ˆçº§ |
|------|------|--------|
| è°ƒè¯•APIæ ¼å¼ | 5åˆ†é’Ÿ | ğŸ”¥ æœ€é«˜ |
| ä¿®å¤ç­–ç•¥åˆ—è¡¨ | 30åˆ†é’Ÿ | ğŸ”¥ æœ€é«˜ |
| ä¿®å¤å›æµ‹è¿è¡Œ | 30åˆ†é’Ÿ | ğŸ”¥ é«˜ |
| å®ç°æ¨¡æ‹Ÿäº¤æ˜“ | 2å°æ—¶ | ğŸ“ ä¸­ |
| LLMé…ç½®é¡µé¢ | 2å°æ—¶ | ğŸ“ ä¸­ |

**æ€»è®¡**: çº¦5å°æ—¶å®Œæ•´ä¿®å¤

---

## ğŸ’¡ å¿«é€ŸéªŒè¯æ–¹æ¡ˆ

### æœ€å°å¯è¡Œä¿®æ”¹ï¼ˆ10åˆ†é’Ÿï¼‰

åªä¿®æ”¹ `BacktestView.vue` çš„ä¸€ä¸ªå‡½æ•°ï¼š

```javascript
// åœ¨ <script> éƒ¨åˆ†çš„ setup() å‡½æ•°ä¸­
const loadStrategies = async () => {
  try {
    console.log('ğŸ” å¼€å§‹åŠ è½½ç­–ç•¥åˆ—è¡¨...')
    const response = await axios.get('http://localhost:8000/api/backtest/strategies')
    console.log('ğŸ“¦ APIå“åº”:', response.data)
    
    if (response.data && response.data.strategies) {
      strategies.value = response.data.strategies
      console.log(`âœ… æˆåŠŸåŠ è½½${strategies.value.length}ä¸ªç­–ç•¥`)
    }
  } catch (error) {
    console.error('âŒ é”™è¯¯:', error)
  }
}
```

**è¿™æ ·ä¿®æ”¹åï¼Œåˆ·æ–°é¡µé¢å°±èƒ½çœ‹åˆ°13ä¸ªç­–ç•¥ï¼**

---

## ğŸ¯ é¢„æœŸæ•ˆæœ

### ä¿®å¤åçš„ç”¨æˆ·ä½“éªŒ

```
1. æ‰“å¼€ç­–ç•¥å›æµ‹é¡µé¢
   â†“
2. è‡ªåŠ¨åŠ è½½13ä¸ªç­–ç•¥å¡ç‰‡ âœ…
   - ğŸ“Š Vegas+ADX
   - ğŸ“Š EMAçªç ´
   - ğŸ“Š ä¸‰å‰æˆŸ
   - ğŸ“Š MACDäº¤å‰
   - ğŸ“Š å¸ƒæ—å¸¦çªç ´
   - ğŸ¤– æƒ…ç»ªå…±æŒ¯
   - ğŸ¤– å¤šç©ºè¾©è®ºåŠ æƒ
   - ğŸ“ˆ æµ·é¾Ÿäº¤æ˜“æ³•åˆ™
   - ğŸ¯ æ¶¨åœæ¿æˆ˜æ³•
   - ğŸ¯ é‡ä»·é½å‡æˆ˜æ³•
   - ğŸ’ å·´è²ç‰¹ä»·å€¼æŠ•èµ„
   - ğŸ’ å½¼å¾—æ—å¥‡æˆé•¿è‚¡
   - ğŸ’ æ ¼é›·å„å§†å®‰å…¨è¾¹é™…
   â†“
3. ç‚¹å‡»é€‰æ‹©ç­–ç•¥ âœ…
   â†“
4. è¾“å…¥è‚¡ç¥¨ä»£ç å’Œå‚æ•° âœ…
   â†“
5. ç‚¹å‡»"å¼€å§‹å›æµ‹" âœ…
   â†“
6. æŸ¥çœ‹å›æµ‹ç»“æœ âœ…
```

---

## ğŸš€ ç«‹å³è¡ŒåŠ¨

### ç°åœ¨å°±åšï¼ˆæœ€é‡è¦ï¼‰

1. **è¿è¡Œè°ƒè¯•è„šæœ¬**
   ```bash
   python test_api_debug.py
   ```

2. **å‘Šè¯‰æˆ‘ç»“æœ**ï¼Œæˆ‘ä¼šæ ¹æ®å®é™…è¿”å›çš„æ•°æ®æ ¼å¼ï¼Œç»™ä½ å‡†ç¡®çš„å‰ç«¯ä¿®æ”¹ä»£ç 

3. **ä¿®æ”¹å‰ç«¯æ–‡ä»¶**ï¼Œæˆ‘ä¼šæä¾›å®Œæ•´çš„ä»£ç 

---

**è¦å¼€å§‹å—ï¼Ÿå…ˆè¿è¡Œ `python test_api_debug.py` çœ‹çœ‹APIå®é™…è¿”å›äº†ä»€ä¹ˆï¼**
