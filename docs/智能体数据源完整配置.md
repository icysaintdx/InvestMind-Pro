# 智能体数据源完整配置

> 更新时间: 2025-12-04 06:19  
> 状态: ✅ 已完成

---

## 📊 智能体数据源映射

### 1. 新闻舆情分析师 (news_analyst) ✅

**数据源**: 统一新闻API

**包含**:
- 实时新闻聚合器（东方财富）- 10条
- AKShare个股新闻 - 10条
- 财联社快讯 - 10条
- 微博热议 - 50条

**显示效果**:
```
📰 新闻舆情分析师
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 参考数据  4个来源 | 80条数据
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
实时新闻聚合器（东方财富） (10条)
AKShare个股新闻 (10条)
财联社快讯 (10条)
微博热议 (50条)
```

---

### 2. 社交媒体分析师 (social_analyst) ✅

**数据源**: 微博热议 + 雪球社区

**包含**:
- 微博热议 - 50条
- 雪球社区 - 待实现

**显示效果**:
```
🗣️ 社交媒体分析师
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 参考数据  2个来源 | 50条数据
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
微博热议 (50条)
雪球社区 (待实现)
```

---

### 3. 中国市场专家 (china_market) ✅

**数据源**: 财联社快讯 + 东方财富

**包含**:
- 财联社快讯 - 10条
- 东方财富 - 10条

**显示效果**:
```
🇨🇳 中国市场专家
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 参考数据  2个来源 | 20条数据
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
财联社快讯 (10条)
东方财富 (10条)
```

---

### 4. 风险评估 (risk_system) ✅

**数据源**: 中国裁判文书网 + 法律风险分析

**包含**:
- 中国裁判文书网 - 框架已完成，待实现
- 法律风险分析 - 模拟数据

**显示效果**:
```
⚠️ 系统性风险评估
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 参考数据  2个来源 | 0条数据
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
中国裁判文书网 (框架已完成，待实现)
法律风险分析 (模拟数据)
```

---

### 5. 其他风险类智能体 ✅

**适用于**:
- risk_manager (风险经理)
- risk_conservative (保守型)
- risk_aggressive (激进型)
- risk_neutral (中性型)
- risk_portfolio (组合风险)

**数据源**: 法律风险数据

**包含**:
- 法律风险数据 - 待实现

**显示效果**:
```
🛡️ 风险经理
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 参考数据  1个来源 | 0条数据
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
法律风险数据 (待实现)
```

---

### 6. 交易员/合规运营 (trader) ✅

**数据源**: 巨潮资讯网 + 公司公告

**包含**:
- 巨潮资讯网 - 框架已完成，待实现
- 公司公告 - 模拟数据

**显示效果**:
```
💼 交易员
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 参考数据  2个来源 | 0条数据
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
巨潮资讯网 (框架已完成，待实现)
公司公告 (模拟数据)
```

---

## 🔧 实现细节

### 代码位置
**文件**: `alpha-council-vue/src/views/AnalysisView.vue`  
**行数**: 第444-592行

### 数据源配置逻辑

```javascript
// 为不同的智能体添加真实的数据源
if (agent.id === 'news_analyst') {
  // 新闻分析师 - 使用统一新闻API
  const newsResult = await fetchNewsData(data.symbol)
  // 提取所有成功的数据源
  for (const [sourceName, sourceData] of Object.entries(newsData.sources || {})) {
    if (sourceData.status === 'success') {
      sources.push({
        source: sourceData.source || sourceName,
        count: sourceData.count || 0,
        title: `${sourceData.count || 0}条数据`
      })
    }
  }
}

else if (agent.id === 'social_analyst') {
  // 社交媒体分析师 - 使用微博热议数据
  const weiboData = newsResult.data.sources.weibo_hot
  if (weiboData && weiboData.status === 'success') {
    agentDataSources.value[agent.id] = [
      {
        source: '微博热议',
        count: weiboData.count || 50,
        title: `${weiboData.count || 50}条热议数据`
      }
    ]
  }
}

else if (agent.id === 'china_market') {
  // 中国市场专家 - 使用市场数据
  const clsData = newsResult.data.sources.cls_telegraph
  const realtimeData = newsResult.data.sources.realtime_news
  // 组合多个数据源
}

else if (agent.id === 'risk_system') {
  // 风险评估 - 使用法律文书数据
  agentDataSources.value[agent.id] = [
    {
      source: '中国裁判文书网',
      count: 0,
      title: '框架已完成，待实现'
    }
  ]
}
```

---

## 📊 数据源状态

### 已实现 ✅
1. **新闻分析师** - 统一新闻API（4个数据源，80条数据）
2. **社交媒体分析师** - 微博热议（50条数据）
3. **中国市场专家** - 财联社+东方财富（20条数据）

### 框架完成，待实现 ⏳
4. **风险评估** - 中国裁判文书网
5. **交易员** - 巨潮资讯网
6. **其他风险类** - 法律风险数据

### 待开发 📝
7. **雪球社区** - 社交媒体数据
8. **更多数据源** - 持续扩展

---

## 🎯 数据源优先级

### 新闻类
```
实时新闻聚合器 > AKShare个股新闻 > 财联社快讯 > 微博热议
```

### 市场类
```
财联社快讯 > 东方财富 > 新浪财经
```

### 风险类
```
中国裁判文书网 > 法律风险分析 > 模拟数据
```

### 合规类
```
巨潮资讯网 > 公司公告 > 监管公告
```

---

## 🧪 测试步骤

### 1. 重启前端
```bash
cd alpha-council-vue
npm run serve
```

### 2. 测试流程
1. 打开 `http://localhost:8080`
2. 输入股票代码 `600519`
3. 点击"开始分析"
4. 观察各智能体卡片的数据源显示

### 3. 预期结果

#### 新闻分析师
```
📊 参考数据  4个来源 | 80条数据
实时新闻聚合器（东方财富） (10条)
AKShare个股新闻 (10条)
财联社快讯 (10条)
微博热议 (50条)
```

#### 社交媒体分析师
```
📊 参考数据  2个来源 | 50条数据
微博热议 (50条)
雪球社区 (待实现)
```

#### 中国市场专家
```
📊 参考数据  2个来源 | 20条数据
财联社快讯 (10条)
东方财富 (10条)
```

#### 风险评估
```
📊 参考数据  2个来源 | 0条数据
中国裁判文书网 (框架已完成，待实现)
法律风险分析 (模拟数据)
```

---

## 💡 关键改进

### 1. 数据透明化
- 每个智能体显示其使用的数据源
- 显示具体的数据数量
- 区分已实现和待实现的数据源

### 2. 用户体验
- 清晰的数据来源标识
- 直观的数据数量显示
- 状态提示（待实现/模拟数据）

### 3. 可扩展性
- 统一的数据源配置格式
- 易于添加新的数据源
- 支持多数据源组合

---

## 🚀 下一步计划

### 短期（本周）
1. ⏳ 实现中国裁判文书网真实API调用
2. ⏳ 实现巨潮资讯网真实API调用
3. ⏳ 添加雪球社区数据源

### 中期（下周）
4. ⏳ 完善法律风险分析
5. ⏳ 添加更多社交媒体数据源
6. ⏳ 优化数据源切换逻辑

### 长期（本月）
7. ⏳ 数据源性能监控
8. ⏳ 数据源质量评分
9. ⏳ 智能推荐数据源

---

## 📝 数据源配置表

| 智能体 | 数据源 | 状态 | 数据量 | 优先级 |
|--------|--------|------|--------|--------|
| 新闻分析师 | 统一新闻API | ✅ 已实现 | 80条 | 高 |
| 社交媒体分析师 | 微博热议 | ✅ 已实现 | 50条 | 高 |
| 中国市场专家 | 财联社+东方财富 | ✅ 已实现 | 20条 | 高 |
| 风险评估 | 裁判文书网 | ⏳ 框架完成 | 0条 | 中 |
| 交易员 | 巨潮资讯网 | ⏳ 框架完成 | 0条 | 中 |
| 其他风险类 | 法律风险 | 📝 待开发 | 0条 | 低 |

---

**所有智能体数据源配置完成！** ✅

现在每个智能体都有明确的数据来源标识，用户可以清楚地看到分析依据的数据源和数据量。
