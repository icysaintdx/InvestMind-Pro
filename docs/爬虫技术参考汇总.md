# çˆ¬è™«æŠ€æœ¯å‚è€ƒæ±‡æ€»

> **åˆ›å»ºæ—¶é—´**: 2025-12-05  
> **ç”¨é€”**: æ±‡æ€»æ‰€æœ‰çˆ¬è™«æŠ€æœ¯å‚è€ƒå’Œå®ç°æ–¹æ¡ˆ

---

## ğŸ“š å·²æœ‰å‚è€ƒæ–‡æ¡£

### 1. å·¨æ½®èµ„è®¯ç½‘ (`docs/çˆ¬è™«å·¨æ½®èµ„è®¯.md`)
**æŠ€æœ¯**: Selenium + Chrome WebDriver

**æ ¸å¿ƒä»£ç **:
```python
from selenium import webdriver
import time

browser = webdriver.Chrome()
url = 'http://www.cninfo.com.cn/new/fulltextSearch?notautosubmit=&keyWord=ä¸­å›½é“¶è¡Œ'
browser.get(url)

# ç‚¹å‡»"æ›´å¤š"æŒ‰é’®
browser.find_element_by_xpath('//*[@id="fulltext-search"]/div/div[1]/div[1]/div[1]/span/a').click()

# ç‚¹å‡»"ä¸‹ä¸€é¡µ"
browser.find_element_by_xpath('//*[@id="main"]/div[3]/div/div[2]/div/div/div[2]/div[1]/div[3]/div/div/button[2]').click()

# ä¸‹è½½PDF
browser.find_element_by_xpath('//*[@id="noticeDetail"]/div/div[1]/div[3]/div[1]/button').click()
```

**ç‰¹ç‚¹**:
- âœ… å¯ä»¥å¤„ç†åŠ¨æ€åŠ è½½
- âœ… å¯ä»¥æ¨¡æ‹Ÿç‚¹å‡»
- âŒ éœ€è¦å®‰è£…ChromeDriver
- âŒ é€Ÿåº¦è¾ƒæ…¢

---

### 2. ä¸­å›½æ‰§è¡Œä¿¡æ¯å…¬å¼€ç½‘ (`docs/çˆ¬è™«æ‰§è¡Œç½‘.md`)
**æŠ€æœ¯**: Requests + lxml + ç™¾åº¦OCRéªŒè¯ç è¯†åˆ«

**æ ¸å¿ƒä»£ç **:
```python
import requests
from lxml import etree
from aip import AipOcr

# ç™¾åº¦OCRé…ç½®
APP_ID = 'your_app_id'
API_KEY = 'your_api_key'
SECRET_KEY = 'your_secret_key'
client = AipOcr(APP_ID, API_KEY, SECRET_KEY)

# è·å–éªŒè¯ç ID
def get_captche_id():
    url = "http://zxgk.court.gov.cn/zhzxgk/index_form.do"
    response = requests.get(url, headers=HEADERS)
    captchaid = re.search(r'var captchaId = \'(.*)\';', response.text).group(1)
    return captchaid

# è¯†åˆ«éªŒè¯ç 
def recognize_image(captchaid):
    url = "http://zxgk.court.gov.cn/zhzxgk/captcha.do"
    response = requests.get(url, params={"captchaId": captchaid})
    
    with open('captcha.jpg', 'wb') as f:
        f.write(response.content)
    
    image = open('captcha.jpg', 'rb').read()
    api_result = client.basicGeneral(image)
    code = api_result['words_result'][0]['words']
    
    return {'j_captcha': code, 'captchaId': captchaid}

# æŸ¥è¯¢è¢«æ‰§è¡Œäºº
def zhixing_person_list(pname, cardnum, captchaid):
    result = recognize_image(captchaid)
    url = "http://zxgk.court.gov.cn/zhzxgk/newsearch"
    payload = {
        'pname': pname,
        'cardNum': cardnum,
        'j_captcha': result.get('j_captcha'),
        'captchaId': result.get('captchaId')
    }
    response = requests.post(url, data=payload, headers=HEADERS)
    # è§£æç»“æœ...
```

**ç‰¹ç‚¹**:
- âœ… é€Ÿåº¦å¿«
- âœ… å¯ä»¥æ‰¹é‡æŸ¥è¯¢
- âŒ éœ€è¦ç™¾åº¦OCR API
- âŒ éœ€è¦å¤„ç†éªŒè¯ç 

**æ•°æ®ç±»å‹**:
- è¢«æ‰§è¡Œäºº (bzxr)
- å¤±ä¿¡è¢«æ‰§è¡Œäºº (sx)
- ç»ˆæœ¬æ¡ˆä»¶ (zb)
- é™åˆ¶æ¶ˆè´¹äººå‘˜ (xgl)

---

### 3. å›½å®¶ä¼ä¸šä¿¡ç”¨ä¿¡æ¯å…¬ç¤ºç³»ç»Ÿ (`docs/çˆ¬è™«ä¼ä¸šä¿¡ç”¨.md`)
**æŠ€æœ¯**: Requests + execjs + JSé€†å‘

**æ ¸å¿ƒä»£ç **:
```python
import execjs
import requests
import re

# åŠ è½½JSæ–‡ä»¶
with open('jiasule.js', encoding='utf-8') as f:
    wc_js = f.read()
ctx = execjs.compile(wc_js)

url = 'http://www.gsxt.gov.cn/index.html'

# ç¬¬ä¸€æ¬¡è¯·æ±‚è·å–jsluid_h
response = requests.get(url, headers=headers)
jsluid_h = response.headers['Set-Cookie'].split('=')[1].split(';')[0]

# æ‰§è¡ŒJSè·å–jsl_clearance
js = re.findall('<script>(.*?)</script>', response.text)[0]
jsl_cookie = ctx.call('jsl', js)
jsl_clearance = re.findall('=(.*?);', jsl_cookie)[0]

# ç¬¬äºŒæ¬¡è¯·æ±‚
headers['Cookie'] = f"__jsluid_h={jsluid_h}; __jsl_clearance={jsl_clearance}"
response = requests.get(url, headers=headers)

# ç¬¬ä¸‰æ¬¡è¯·æ±‚è·å–æœ€ç»ˆclearance
js = re.findall('<script>(.*?)</script>', response.text)[0]
go_init = re.findall("(var\s([a-zA-Z_0-9]*?)=[^;]+?\['ct'\][^;]*;)", js)[0]
js = js.replace(go_init[0], go_init[0] + f"document.cookie = {go_init[1]}[0];")
jsl_clearance = ctx.call('jsl', js)
```

**JSæ–‡ä»¶ (jiasule.js)**:
```javascript
function jsl(js) {
    window = {
        navigator: {
            userAgent: "Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36"
        },
        outerWidth: 1920,
        outerHeight: 1050,
    };
    location = { reload: function() {} };
    document = {};
    eval(js);
    return document.cookie
}
```

**ç‰¹ç‚¹**:
- âœ… å¯ä»¥ç»•è¿‡JSåŠ å¯†
- âœ… é€Ÿåº¦è¾ƒå¿«
- âŒ éœ€è¦JSé€†å‘
- âŒ éœ€è¦execjsåº“

---

### 4. ä¸­å›½è£åˆ¤æ–‡ä¹¦ç½‘ (`docs/ä¸­å›½è£åˆ¤æ–‡ä¹¦ç½‘.cpws.js.md`)
**æŠ€æœ¯**: å¤æ‚çš„JSåŠ å¯† + 3DES

**å…³é”®å‡½æ•°**:
- `cipher()` - ç”ŸæˆåŠ å¯†å‚æ•°
- `uuid()` - ç”Ÿæˆ32ä½GUID
- `DES3.encrypt()` - 3DESåŠ å¯†
- `strTobinary()` - å­—ç¬¦ä¸²è½¬äºŒè¿›åˆ¶

**ç‰¹ç‚¹**:
- âŒ åŠ å¯†éå¸¸å¤æ‚
- âŒ éœ€è¦å¤§é‡JSé€†å‘
- â° é¢„è®¡6-8å°æ—¶å¼€å‘æ—¶é—´

---

## ğŸ¯ AKShareå¯ç”¨æ¥å£

### å·²å‘ç°çš„æ¥å£

#### 1. `stock_cg_lawsuit_cninfo` - è£åˆ¤æ–‡ä¹¦
```python
import akshare as ak

# è·å–è£åˆ¤æ–‡ä¹¦æ•°æ®
df = ak.stock_cg_lawsuit_cninfo(symbol="è‚¡ç¥¨ä»£ç ")
```

**ç”¨é€”**: è·å–ä¸Šå¸‚å…¬å¸è¯‰è®¼æ•°æ®

#### 2. `option_risk_analysis_em` - æœŸæƒé£é™©åˆ†æ
```python
df = ak.option_risk_analysis_em()
```

#### 3. `option_risk_indicator_sse` - ä¸Šäº¤æ‰€æœŸæƒé£é™©æŒ‡æ ‡
```python
df = ak.option_risk_indicator_sse()
```

---

## ğŸ“‹ å®æ–½ä¼˜å…ˆçº§

### ğŸ”¥ ç¬¬ä¸€ä¼˜å…ˆçº§ï¼šä½¿ç”¨AKShareï¼ˆæœ€ç®€å•ï¼‰

1. **æµ‹è¯• `stock_cg_lawsuit_cninfo`** â­â­â­â­â­
   - é¢„è®¡æ—¶é—´: 30åˆ†é’Ÿ
   - éš¾åº¦: æä½
   - ç«‹å³æµ‹è¯•æ˜¯å¦å¯ç”¨

2. **æµ‹è¯•æœŸæƒé£é™©æ¥å£** â­â­â­
   - é¢„è®¡æ—¶é—´: 30åˆ†é’Ÿ
   - éš¾åº¦: æä½

---

### ğŸ”¥ ç¬¬äºŒä¼˜å…ˆçº§ï¼šç®€å•çˆ¬è™«ï¼ˆä¸­ç­‰éš¾åº¦ï¼‰

3. **ä¸­å›½æ‰§è¡Œä¿¡æ¯å…¬å¼€ç½‘** â­â­â­â­â­
   - é¢„è®¡æ—¶é—´: 4-5å°æ—¶
   - éš¾åº¦: ä¸­ç­‰ï¼ˆéœ€è¦OCRï¼‰
   - ä»·å€¼: æé«˜ï¼ˆå¤±ä¿¡è¢«æ‰§è¡Œäººï¼‰
   - å‚è€ƒ: `docs/çˆ¬è™«æ‰§è¡Œç½‘.md`

4. **å›½å®¶ä¼ä¸šä¿¡ç”¨ä¿¡æ¯å…¬ç¤ºç³»ç»Ÿ** â­â­â­â­â­
   - é¢„è®¡æ—¶é—´: 3-4å°æ—¶
   - éš¾åº¦: ä¸­ç­‰ï¼ˆéœ€è¦JSé€†å‘ï¼‰
   - ä»·å€¼: æé«˜ï¼ˆç»è¥å¼‚å¸¸ï¼‰
   - å‚è€ƒ: `docs/çˆ¬è™«ä¼ä¸šä¿¡ç”¨.md`

---

### ğŸ”¥ ç¬¬ä¸‰ä¼˜å…ˆçº§ï¼šå¤æ‚çˆ¬è™«ï¼ˆé«˜éš¾åº¦ï¼‰

5. **å·¨æ½®èµ„è®¯ç½‘** â­â­â­â­
   - é¢„è®¡æ—¶é—´: 3-4å°æ—¶
   - éš¾åº¦: ä¸­ç­‰ï¼ˆSeleniumï¼‰
   - ä»·å€¼: é«˜ï¼ˆå…¬å¸å…¬å‘Šï¼‰
   - å‚è€ƒ: `docs/çˆ¬è™«å·¨æ½®èµ„è®¯.md`

6. **ä¸­å›½è£åˆ¤æ–‡ä¹¦ç½‘** â­â­â­â­â­
   - é¢„è®¡æ—¶é—´: 6-8å°æ—¶
   - éš¾åº¦: é«˜ï¼ˆå¤æ‚åŠ å¯†ï¼‰
   - ä»·å€¼: æé«˜ï¼ˆæ³•å¾‹è¯‰è®¼ï¼‰
   - å‚è€ƒ: `docs/ä¸­å›½è£åˆ¤æ–‡ä¹¦ç½‘.cpws.js.md`

---

## ğŸ› ï¸ æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆA: AKShareï¼ˆæ¨èï¼‰
**ä¼˜åŠ¿**:
- âœ… å¼€ç®±å³ç”¨
- âœ… ç»´æŠ¤æˆæœ¬ä½
- âœ… ç¨³å®šæ€§é«˜

**åŠ£åŠ¿**:
- âŒ æ•°æ®å¯èƒ½ä¸å®Œæ•´
- âŒ æ¥å£æœ‰é™

### æ–¹æ¡ˆB: Requestsçˆ¬è™«
**ä¼˜åŠ¿**:
- âœ… é€Ÿåº¦å¿«
- âœ… å¯æ§æ€§å¼º
- âœ… æ•°æ®å®Œæ•´

**åŠ£åŠ¿**:
- âŒ éœ€è¦å¤„ç†åçˆ¬è™«
- âŒ ç»´æŠ¤æˆæœ¬é«˜

### æ–¹æ¡ˆC: Seleniumçˆ¬è™«
**ä¼˜åŠ¿**:
- âœ… å¯ä»¥å¤„ç†åŠ¨æ€é¡µé¢
- âœ… å¯ä»¥æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œ

**åŠ£åŠ¿**:
- âŒ é€Ÿåº¦æ…¢
- âŒ èµ„æºæ¶ˆè€—å¤§
- âŒ éœ€è¦å®‰è£…æµè§ˆå™¨é©±åŠ¨

---

## ğŸ“¦ ä¾èµ–åº“

### åŸºç¡€åº“
```bash
pip install requests lxml beautifulsoup4
```

### OCRè¯†åˆ«ï¼ˆæ‰§è¡Œä¿¡æ¯å…¬å¼€ç½‘ï¼‰
```bash
pip install baidu-aip
```

### JSæ‰§è¡Œï¼ˆä¼ä¸šä¿¡ç”¨å…¬ç¤ºç³»ç»Ÿï¼‰
```bash
pip install PyExecJS
```

### Seleniumï¼ˆå·¨æ½®èµ„è®¯ç½‘ï¼‰
```bash
pip install selenium
# è¿˜éœ€è¦ä¸‹è½½ChromeDriver
```

---

## ğŸ¯ ç«‹å³è¡ŒåŠ¨

### ç¬¬ä¸€æ­¥ï¼šæµ‹è¯•AKShareè£åˆ¤æ–‡ä¹¦æ¥å£
```python
import akshare as ak

# æµ‹è¯•è£åˆ¤æ–‡ä¹¦æ¥å£
try:
    df = ak.stock_cg_lawsuit_cninfo(symbol="600519")
    print(df.head())
    print(f"è·å–åˆ°{len(df)}æ¡æ•°æ®")
except Exception as e:
    print(f"æ¥å£ä¸å¯ç”¨: {e}")
```

### ç¬¬äºŒæ­¥ï¼šæ ¹æ®æµ‹è¯•ç»“æœå†³å®š
- âœ… å¦‚æœå¯ç”¨ï¼šä¼˜å…ˆä½¿ç”¨AKShare
- âŒ å¦‚æœä¸å¯ç”¨ï¼šå¼€å‘è‡ªå·±çš„çˆ¬è™«

---

## ğŸ“ å¼€å‘é¡ºåº

### ä»Šå¤©ï¼ˆç«‹å³å¼€å§‹ï¼‰
1. âœ… æµ‹è¯• `stock_cg_lawsuit_cninfo`
2. â° å¦‚æœå¯ç”¨ï¼Œé›†æˆåˆ°ç³»ç»Ÿ
3. â° å¦‚æœä¸å¯ç”¨ï¼Œå¼€å§‹å¼€å‘æ‰§è¡Œä¿¡æ¯å…¬å¼€ç½‘çˆ¬è™«

### æ˜å¤©
4. å¼€å‘ä¼ä¸šä¿¡ç”¨å…¬ç¤ºç³»ç»Ÿçˆ¬è™«
5. æµ‹è¯•å’Œä¼˜åŒ–

### åå¤©
6. å¼€å‘å·¨æ½®èµ„è®¯ç½‘çˆ¬è™«ï¼ˆSeleniumï¼‰
7. ç»¼åˆæµ‹è¯•

### ä¸‹å‘¨
8. å¼€å‘ä¸­å›½è£åˆ¤æ–‡ä¹¦ç½‘çˆ¬è™«ï¼ˆå¦‚æœå¿…è¦ï¼‰
9. å®Œå–„æ–‡æ¡£å’Œæµ‹è¯•

---

## ğŸ‰ æ€»ç»“

æˆ‘ä»¬ç°åœ¨æœ‰ï¼š
- âœ… 4ä¸ªå®Œæ•´çš„çˆ¬è™«å‚è€ƒä»£ç 
- âœ… 1ä¸ªAKShareå¯èƒ½å¯ç”¨çš„æ¥å£
- âœ… æ¸…æ™°çš„æŠ€æœ¯æ–¹æ¡ˆ
- âœ… æ˜ç¡®çš„ä¼˜å…ˆçº§

**ç°åœ¨ç«‹å³æµ‹è¯•AKShareçš„è£åˆ¤æ–‡ä¹¦æ¥å£ï¼** ğŸš€
