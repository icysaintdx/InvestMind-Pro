# ğŸš€ InvestMindPro æ™ºèƒ½æŠ•èµ„ç³»ç»Ÿé›†æˆæ‰§è¡Œè®¡åˆ’
> æ—¥æœŸï¼š2024-12-03 17:10
> ç‰ˆæœ¬ï¼šv2.0.0 - å¤šæ™ºèƒ½ä½“åšå¼ˆå¢å¼ºç‰ˆ

## ğŸ“Š ä¸€ã€é¡¹ç›®ç°çŠ¶æ€»ç»“

### 1.1 å·²å®Œæˆéƒ¨åˆ†
âœ… **åŸºç¡€æ¶æ„**
- 10ä¸ªæ™ºèƒ½ä½“çš„çº¿æ€§åˆ†ææµç¨‹
- Vue3å‰ç«¯æ¡†æ¶ï¼ˆalpha-council-vueï¼‰
- FastAPIåç«¯æœåŠ¡
- åŸºç¡€è‚¡ç¥¨æ•°æ®æ¥å£

âœ… **å·²è¿ç§»ä»£ç **
- agents/ç›®å½•ä¸‹çš„åˆ†æå¸ˆã€ç ”ç©¶å‘˜ã€é£æ§ã€äº¤æ˜“å‘˜ä»£ç 
- backend/dataflows/éƒ¨åˆ†æ•°æ®æµä»£ç 
- åŸºç¡€çš„æç¤ºè¯å’Œæ–‡æ¡£

### 1.2 å¾…è§£å†³é—®é¢˜
âŒ **å¯¼å…¥è·¯å¾„é—®é¢˜**
- æ‰€æœ‰ä»£ç ä»ä½¿ç”¨`from tradingagents.xxx import`
- éœ€è¦ç»Ÿä¸€ä¿®æ”¹ä¸ºæœ¬é¡¹ç›®è·¯å¾„

âŒ **åŠŸèƒ½æœªé›†æˆ**
- æ–°é—»èˆ†æƒ…åˆ†ææœªæ¥å…¥API
- å¤šç©ºè¾©è®ºæœºåˆ¶æœªæ¿€æ´»
- æ¨¡æ‹Ÿäº¤æ˜“ç³»ç»Ÿéœ€è¦å®Œå–„
- é—­ç¯éªŒè¯æœºåˆ¶ç¼ºå¤±

## ğŸ¯ äºŒã€åˆ†é˜¶æ®µæ‰§è¡Œè®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šè·¯å¾„ä¿®å¤å’ŒåŸºç¡€é›†æˆï¼ˆä»Šå¤©å®Œæˆï¼‰

#### 1.1 åˆ›å»ºè·¯å¾„æ˜ å°„å·¥å…·
```python
# scripts/fix_imports.py
# æ‰¹é‡ä¿®å¤æ‰€æœ‰å¯¼å…¥è·¯å¾„
```

#### 1.2 ä¿®å¤æ‰€æœ‰å¯¼å…¥è¯­å¥
- å°†`tradingagents.` â†’ æ”¹ä¸ºé¡¹ç›®æœ¬åœ°è·¯å¾„
- åˆ›å»ºç»Ÿä¸€çš„æ—¥å¿—ç³»ç»Ÿ
- ä¿®å¤å·¥å…·ç±»å¯¼å…¥

#### 1.3 æµ‹è¯•åŸºç¡€åŠŸèƒ½
- éªŒè¯æ‰€æœ‰æ™ºèƒ½ä½“å¯ä»¥æ­£å¸¸åˆ›å»º
- æµ‹è¯•æ•°æ®æ¥å£æ˜¯å¦æ­£å¸¸

### ç¬¬äºŒé˜¶æ®µï¼šæ–°é—»èˆ†æƒ…é›†æˆï¼ˆç¬¬1-2å¤©ï¼‰

#### 2.1 é›†æˆæ–°é—»æ•°æ®æº
- èšåˆæ•°æ®APIï¼ˆå·²æœ‰KEYï¼‰
- ä¸œæ–¹è´¢å¯Œç½‘çˆ¬è™«
- é›ªçƒç½‘èˆ†æƒ…çˆ¬è™«
- è´¢è”ç¤¾å¿«è®¯æ¥å£

#### 2.2 åˆ›å»ºæ–°é—»APIæ¥å£
```python
# backend/api/news_api.py
@router.post("/api/news/analyze")
async def analyze_news(stock_code: str):
    # æ–°é—»æƒ…ç»ªåˆ†æ
    pass
```

#### 2.3 å‰ç«¯é›†æˆ
- åœ¨Vueä¸­æ·»åŠ æ–°é—»åˆ†æç»„ä»¶
- å®æ—¶å±•ç¤ºæ–°é—»æƒ…ç»ªæŒ‡æ ‡

### ç¬¬ä¸‰é˜¶æ®µï¼šå¤šæ™ºèƒ½ä½“åšå¼ˆï¼ˆç¬¬3-4å¤©ï¼‰

#### 3.1 æ¿€æ´»å¤šç©ºè¾©è®ºæœºåˆ¶
- é›†æˆbull_researcherå’Œbear_researcher
- å®ç°research_managerå†³ç­–æ•´åˆ

#### 3.2 é£æ§ä¸‰æ–¹è¾©è®º
- æ¿€è¿›ã€ä¿å®ˆã€ä¸­ç«‹ä¸‰æ–¹åšå¼ˆ
- risk_manageræœ€ç»ˆè£å†³

#### 3.3 å†³ç­–å¯è§†åŒ–
- è¾©è®ºè¿‡ç¨‹å¯è§†åŒ–
- å†³ç­–è·¯å¾„å±•ç¤º

### ç¬¬å››é˜¶æ®µï¼šæ¨¡æ‹Ÿäº¤æ˜“å¢å¼ºï¼ˆç¬¬5-6å¤©ï¼‰

#### 4.1 å®Œå–„æ¨¡æ‹Ÿäº¤æ˜“ç³»ç»Ÿ
- ç»“æ„åŒ–å†³ç­–è¾“å‡º
- è‡ªåŠ¨æ‰§è¡Œäº¤æ˜“
- æŒä»“è·Ÿè¸ª

#### 4.2 æ”¶ç›Šç‡è·Ÿè¸ª
- æ—¥æ”¶ç›Šæ›²çº¿
- ç­–ç•¥å¯¹æ¯”åˆ†æ
- å›æµ‹åŠŸèƒ½

#### 4.3 å¯è§†åŒ–é¢æ¿
- å®æ—¶æŒä»“å±•ç¤º
- æ”¶ç›Šç‡å›¾è¡¨
- é£é™©æŒ‡æ ‡ç›‘æ§

### ç¬¬äº”é˜¶æ®µï¼šé—­ç¯éªŒè¯ï¼ˆç¬¬7å¤©ï¼‰

#### 5.1 å†³ç­–éªŒè¯ç³»ç»Ÿ
- è®°å½•æ‰€æœ‰å†³ç­–
- è·Ÿè¸ªå®é™…è¡¨ç°
- è‡ªåŠ¨è¯„åˆ†æœºåˆ¶

#### 5.2 ç­–ç•¥ä¼˜åŒ–
- åŸºäºå†å²è¡¨ç°è°ƒæ•´æƒé‡
- æ™ºèƒ½ä½“è¡¨ç°è¯„ä¼°
- è‡ªé€‚åº”å‚æ•°è°ƒæ•´

## ğŸ“‹ ä¸‰ã€ç«‹å³æ‰§è¡Œä»»åŠ¡

### 3.1 ç¬¬ä¸€æ­¥ï¼šä¿®å¤å¯¼å…¥è·¯å¾„ï¼ˆç°åœ¨å¼€å§‹ï¼‰

åˆ›å»ºè·¯å¾„ä¿®å¤è„šæœ¬ï¼Œæ‰¹é‡æ›¿æ¢æ‰€æœ‰å¯¼å…¥è¯­å¥ï¼š

```python
# scripts/fix_imports.py
import os
import re

def fix_imports_in_file(filepath):
    """ä¿®å¤å•ä¸ªæ–‡ä»¶çš„å¯¼å…¥è¯­å¥"""
    replacements = {
        'from tradingagents.agents': 'from agents',
        'from tradingagents.tools': 'from backend.tools',
        'from tradingagents.dataflows': 'from backend.dataflows',
        'from tradingagents.utils': 'from agents.utils',
        'import tradingagents': '# import tradingagents (removed)',
    }
    
    # è¯»å–å¹¶æ›¿æ¢
    with open(filepath, 'r', encoding='utf-8') as f:
        content = f.read()
    
    for old, new in replacements.items():
        content = re.sub(old, new, content)
    
    # å†™å›æ–‡ä»¶
    with open(filepath, 'w', encoding='utf-8') as f:
        f.write(content)
```

### 3.2 ç¬¬äºŒæ­¥ï¼šåˆ›å»ºç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ

```python
# backend/utils/logging_config.py
import logging
import os
from datetime import datetime

def get_logger(name):
    """è·å–ç»Ÿä¸€é…ç½®çš„æ—¥å¿—å™¨"""
    logger = logging.getLogger(name)
    
    if not logger.handlers:
        # åˆ›å»ºæ—¥å¿—ç›®å½•
        log_dir = "logs"
        os.makedirs(log_dir, exist_ok=True)
        
        # è®¾ç½®æ—¥å¿—æ ¼å¼
        formatter = logging.Formatter(
            '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
        )
        
        # æ–‡ä»¶å¤„ç†å™¨
        file_handler = logging.FileHandler(
            f'{log_dir}/alpha_{datetime.now():%Y%m%d}.log',
            encoding='utf-8'
        )
        file_handler.setFormatter(formatter)
        
        # æ§åˆ¶å°å¤„ç†å™¨
        console_handler = logging.StreamHandler()
        console_handler.setFormatter(formatter)
        
        # æ·»åŠ å¤„ç†å™¨
        logger.addHandler(file_handler)
        logger.addHandler(console_handler)
        logger.setLevel(logging.INFO)
    
    return logger
```

### 3.3 ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºä¸­å›½å¸‚åœºæ•°æ®çˆ¬è™«

```python
# backend/dataflows/china_market_crawler.py
"""ä¸­å›½å¸‚åœºç‰¹å®šæ•°æ®çˆ¬è™«"""

import requests
from bs4 import BeautifulSoup
import akshare as ak
import tushare as ts
from backend.utils.logging_config import get_logger

logger = get_logger("china_market_crawler")

class ChinaMarketCrawler:
    """ä¸­å›½å¸‚åœºæ•°æ®çˆ¬è™«"""
    
    def __init__(self):
        self.tushare_token = os.getenv('TUSHARE_TOKEN')
        if self.tushare_token:
            ts.set_token(self.tushare_token)
            self.pro = ts.pro_api()
    
    def get_eastmoney_news(self, stock_code):
        """è·å–ä¸œæ–¹è´¢å¯Œç½‘æ–°é—»"""
        # å®ç°ä¸œè´¢æ–°é—»çˆ¬å–
        pass
    
    def get_xueqiu_comments(self, stock_code):
        """è·å–é›ªçƒç½‘è¯„è®ºèˆ†æƒ…"""
        # å®ç°é›ªçƒçˆ¬è™«
        pass
    
    def get_cls_news(self):
        """è·å–è´¢è”ç¤¾å¿«è®¯"""
        # å®ç°è´¢è”ç¤¾çˆ¬è™«
        pass
    
    def get_sina_news(self, stock_code):
        """è·å–æ–°æµªè´¢ç»æ–°é—»"""
        # å®ç°æ–°æµªçˆ¬è™«
        pass
```

## ğŸ“ˆ å››ã€é¢„æœŸæˆæœ

### çŸ­æœŸï¼ˆæœ¬å‘¨ï¼‰
- âœ… è·¯å¾„é—®é¢˜å®Œå…¨è§£å†³
- âœ… æ–°é—»èˆ†æƒ…åŠŸèƒ½ä¸Šçº¿
- âœ… å¤šç©ºè¾©è®ºæœºåˆ¶æ¿€æ´»
- âœ… åŸºç¡€æ¨¡æ‹Ÿäº¤æ˜“è¿è¡Œ

### ä¸­æœŸï¼ˆ2å‘¨ï¼‰
- âœ… å®Œæ•´çš„åšå¼ˆå†³ç­–ç³»ç»Ÿ
- âœ… è‡ªåŠ¨åŒ–æ¨¡æ‹Ÿäº¤æ˜“
- âœ… å¯è§†åŒ–å†³ç­–é¢æ¿
- âœ… åˆæ­¥é—­ç¯éªŒè¯

### é•¿æœŸï¼ˆ1ä¸ªæœˆï¼‰
- âœ… ç­–ç•¥è‡ªåŠ¨ä¼˜åŒ–
- âœ… å¤šç­–ç•¥å¯¹æ¯”å›æµ‹
- âœ… å®ç›˜å¯¹æ¥å‡†å¤‡
- âœ… ç”¨æˆ·æŒä»“å®šåˆ¶è¯„æµ‹

## ğŸ”§ äº”ã€æŠ€æœ¯æ¶æ„

```
InvestMindPro/
â”œâ”€â”€ agents/              # æ™ºèƒ½ä½“æ ¸å¿ƒï¼ˆ15ä¸ªï¼‰
â”‚   â”œâ”€â”€ analysts/        # 8ä¸ªåˆ†æå¸ˆ
â”‚   â”œâ”€â”€ researchers/     # å¤šç©ºè¾©è®º
â”‚   â”œâ”€â”€ managers/        # å†³ç­–ç®¡ç†
â”‚   â”œâ”€â”€ risk_mgmt/       # é£æ§è¾©è®º
â”‚   â””â”€â”€ trader/          # äº¤æ˜“æ‰§è¡Œ
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ api/            # FastAPIæ¥å£
â”‚   â”œâ”€â”€ dataflows/      # æ•°æ®æµç®¡ç†
â”‚   â”œâ”€â”€ tools/          # å·¥å…·ç±»
â”‚   â””â”€â”€ utils/          # å·¥å…·å‡½æ•°
â”œâ”€â”€ alpha-council-vue/   # Vue3å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/      # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/ # é€šç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ stores/     # PiniaçŠ¶æ€
â”‚   â””â”€â”€ dist/           # æ„å»ºè¾“å‡º
â””â”€â”€ docs/               # æ–‡æ¡£
```

## ğŸ“ å…­ã€å…³é”®é…ç½®

### 6.1 ç¯å¢ƒå˜é‡ï¼ˆ.envï¼‰
```
# LLMé…ç½®
OPENAI_API_KEY=sk-xxx
OPENAI_BASE_URL=https://api.deepseek.com

# æ•°æ®æºé…ç½®
TUSHARE_TOKEN=xxx
JUHE_API_KEY=xxx
AKSHARE_ENABLED=true

# ç³»ç»Ÿé…ç½®
DEBUG_MODE=true
LOG_LEVEL=INFO
```

### 6.2 æ•°æ®æºä¼˜å…ˆçº§
1. Tushareï¼ˆä»˜è´¹ï¼Œç¨³å®šï¼‰
2. AkShareï¼ˆå…è´¹ï¼Œå¤‡ç”¨ï¼‰
3. èšåˆæ•°æ®ï¼ˆæ–°é—»ï¼‰
4. ç½‘é¡µçˆ¬è™«ï¼ˆé™çº§ï¼‰

## ğŸš¦ ä¸ƒã€æ‰§è¡ŒçŠ¶æ€è·Ÿè¸ª

| ä»»åŠ¡ | çŠ¶æ€ | å®Œæˆæ—¶é—´ | è´Ÿè´£äºº |
|-----|------|---------|--------|
| è·¯å¾„ä¿®å¤ | ğŸ”„ è¿›è¡Œä¸­ | ä»Šå¤© | AI |
| æ—¥å¿—ç³»ç»Ÿ | â³ å¾…å¼€å§‹ | ä»Šå¤© | AI |
| æ–°é—»çˆ¬è™« | â³ å¾…å¼€å§‹ | æ˜å¤© | AI |
| å¤šç©ºè¾©è®º | â³ å¾…å¼€å§‹ | ç¬¬3å¤© | AI |
| æ¨¡æ‹Ÿäº¤æ˜“ | â³ å¾…å¼€å§‹ | ç¬¬5å¤© | AI |
| é—­ç¯éªŒè¯ | â³ å¾…å¼€å§‹ | ç¬¬7å¤© | AI |

---

**ç«‹å³å¼€å§‹æ‰§è¡Œï¼**
