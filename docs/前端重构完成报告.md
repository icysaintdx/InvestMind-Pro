# 🎨 前端重构与拟真化升级报告

**日期**: 2025-12-03
**版本**: v1.1.0
**作者**: Cascade

## 1. 核心变更

本次重构旨在解决"分析流程机械化"和"回复模板化"的问题，打造一个更接近真实投资机构工作流的演示系统。

### 1.1 流水线式分阶段执行
打破了原有的并发执行模式，改为带依赖关系的流水线：
1.  **情报搜集层**: 新闻、社交、中国市场 (并行执行)
2.  **中观分析层**: 行业、宏观 (依赖情报层)
3.  **深度研判层**: 技术、资金、基本面 (依赖中观层)

### 1.2 动态指令注入 (Dynamic Instruction)
前端现在会根据智能体角色生成特定的指令，并通过 `custom_instruction` 字段传给后端。
- **News**: "检索24H公告..."
- **Technical**: "忽略基本面，仅看K线..."
- **Risk**: "无情指出风险..."

### 1.3 数据智能回退
在 `fetchStockData` 中增加了 `try-catch` 和模拟数据生成。当后端 API 失败或返回 N/A 时，自动使用一套逼真的模拟数据进行分析，保证演示不中断。

## 2. 文件变更列表

- `alpha-council-vue/src/views/AnalysisView.vue`: 核心逻辑重构，增加阶段控制和 Prompt 生成。
- `backend/server.py`: API 接口升级，支持 `custom_instruction` 和前序摘要拼接。
- `CHANGELOG.md`: 记录更新日志。
- `VERSION.json`: 版本号更新。

## 3. 下一步计划

- 在前端添加智能体详细介绍 Tooltip。
- 优化辩论环节的实时流式输出。
