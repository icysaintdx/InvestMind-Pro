# æ•°æ®é›†æˆä½¿ç”¨æŒ‡å—

**åˆ›å»ºæ—¶é—´**: 2025-12-05 06:05  
**çŠ¶æ€**: âœ… å·²å®Œæˆé›†æˆ

---

## ğŸ¯ æ ¸å¿ƒç›®æ ‡

**è®©æ™ºèƒ½ä½“çœŸæ­£èƒ½ç”¨ä¸Šæ•°æ®ï¼**

æ‰€æœ‰æ•°æ®æ¨¡å—å·²å¼€å‘å®Œæˆï¼Œå¹¶é€šè¿‡APIç«¯ç‚¹æš´éœ²ï¼Œåˆ†æå¸ˆå¯ä»¥ç›´æ¥è°ƒç”¨ã€‚

---

## ğŸ“Š å·²é›†æˆçš„æ•°æ®æ¨¡å—

### 1. èµ„é‡‘æµå‘æ•°æ® âœ…

#### æœåŠ¡çš„æ™ºèƒ½ä½“
- **èµ„é‡‘æµå‘åˆ†æå¸ˆ** (funds)
- ä¸­å›½å¸‚åœºåˆ†æå¸ˆ (china_market)
- åŠ¨é‡æŠ•èµ„ç»ç† (manager_momentum)

#### APIç«¯ç‚¹
```
GET /api/akshare/fund-flow/{symbol}              # ä¸ªè‚¡èµ„é‡‘æµå‘
GET /api/akshare/fund-flow/industry/realtime     # è¡Œä¸šèµ„é‡‘æµå‘
GET /api/akshare/fund-flow/concept/realtime      # æ¦‚å¿µèµ„é‡‘æµå‘
GET /api/akshare/fund-flow/north-bound/realtime  # åŒ—å‘èµ„é‡‘å®æ—¶
```

#### ä½¿ç”¨ç¤ºä¾‹
```python
# åœ¨åˆ†æå¸ˆä»£ç ä¸­
import requests
response = requests.get("http://localhost:8000/api/akshare/fund-flow/600519")
data = response.json()["data"]
```

---

### 2. è´¢åŠ¡æ•°æ® âœ…

#### æœåŠ¡çš„æ™ºèƒ½ä½“
- **åŸºæœ¬é¢ä¼°å€¼åˆ†æå¸ˆ** (fundamental)
- åŸºæœ¬é¢ç ”ç©¶æ€»ç›‘ (manager_fundamental)

#### APIç«¯ç‚¹
```
GET /api/akshare/financial/{symbol}              # ä¸‰å¤§è´¢åŠ¡æŠ¥è¡¨
GET /api/akshare/financial/{symbol}/summary      # æœ€æ–°è´¢åŠ¡æ‘˜è¦
```

#### ä½¿ç”¨ç¤ºä¾‹
```python
# è·å–è´µå·èŒ…å°è´¢åŠ¡æ‘˜è¦
response = requests.get("http://localhost:8000/api/akshare/financial/600519/summary")
summary = response.json()["data"]
```

---

### 3. ç¤¾äº¤åª’ä½“æ•°æ® âœ…

#### æœåŠ¡çš„æ™ºèƒ½ä½“
- **ç¤¾äº¤åª’ä½“åˆ†æå¸ˆ** (social_analyst)
- æ–°é—»é¢æ¿ï¼šç¤¾äº¤åª’ä½“ä¸“åŒº

#### APIç«¯ç‚¹
```
GET /api/akshare/social-media/all                # ç»¼åˆç¤¾äº¤åª’ä½“æ•°æ®
GET /api/akshare/social-media/weibo/hot-search   # å¾®åšçƒ­æœ
GET /api/akshare/social-media/weibo/stock-hot    # å¾®åšè‚¡ç¥¨çƒ­è®®
```

#### ä½¿ç”¨ç¤ºä¾‹
```python
# è·å–å¾®åšè‚¡ç¥¨çƒ­è®®
response = requests.get("http://localhost:8000/api/akshare/social-media/weibo/stock-hot")
hot_stocks = response.json()["data"]
```

---

## ğŸ”§ å¦‚ä½•è®©åˆ†æå¸ˆä½¿ç”¨æ•°æ®

### æ–¹å¼1: åœ¨åˆ†æå¸ˆæç¤ºè¯ä¸­è¯´æ˜

ä¿®æ”¹ `backend/agents/agent_registry.py` ä¸­çš„åˆ†æå¸ˆé…ç½®ï¼š

```python
# èµ„é‡‘æµå‘åˆ†æå¸ˆ
AgentConfig(
    id="funds",
    name="èµ„é‡‘æµå‘åˆ†æå¸ˆ",
    description="""
    è¿½è¸ªä¸»åŠ›èµ„é‡‘åŠ¨å‘ã€åŒ—å‘èµ„é‡‘ã€æœºæ„æŒä»“å˜åŒ–
    
    **æ•°æ®è·å–æ–¹å¼**:
    - ä¸ªè‚¡èµ„é‡‘æµå‘: GET /api/akshare/fund-flow/{symbol}
    - è¡Œä¸šèµ„é‡‘æµå‘: GET /api/akshare/fund-flow/industry/realtime
    - åŒ—å‘èµ„é‡‘: GET /api/akshare/fund-flow/north-bound/realtime
    """
)
```

### æ–¹å¼2: åœ¨åˆ†ææµç¨‹ä¸­è‡ªåŠ¨æ³¨å…¥æ•°æ®

ä¿®æ”¹ `backend/agents/__init__.py` æˆ–åˆ†ææµç¨‹ä»£ç ï¼š

```python
async def analyze_with_fund_flow(symbol: str):
    # 1. è·å–èµ„é‡‘æµå‘æ•°æ®
    fund_flow_data = requests.get(f"http://localhost:8000/api/akshare/fund-flow/{symbol}").json()["data"]
    
    # 2. å°†æ•°æ®ä¼ é€’ç»™åˆ†æå¸ˆ
    prompt = f"""
    è¯·åˆ†æ{symbol}çš„èµ„é‡‘æµå‘ï¼š
    
    åŒ—å‘èµ„é‡‘: {fund_flow_data['north_bound_realtime']}
    ä¸ªè‚¡èµ„é‡‘æµ: {fund_flow_data['stock_detail']}
    """
    
    # 3. è°ƒç”¨LLMåˆ†æ
    response = await llm.ainvoke(prompt)
    return response
```

### æ–¹å¼3: å‰ç«¯ç›´æ¥è°ƒç”¨ï¼ˆæ¨èï¼‰

å‰ç«¯å¯ä»¥ç›´æ¥è°ƒç”¨APIè·å–æ•°æ®å¹¶å±•ç¤ºï¼š

```javascript
// è·å–ç¤¾äº¤åª’ä½“æ•°æ®
async function loadSocialMedia() {
  const response = await fetch('http://localhost:8000/api/akshare/social-media/all')
  const data = await response.json()
  
  // å±•ç¤ºå¾®åšçƒ­æœ
  displayWeiboHotSearch(data.data.weibo_hot_search)
  
  // å±•ç¤ºå¾®åšè‚¡ç¥¨çƒ­è®®
  displayWeiboStockHot(data.data.weibo_stock_hot)
}
```

---

## ğŸ“‹ ç¬¬2å‘¨è®¡åˆ’ï¼šè¡¥å……æ•°æ®

### å·²å®Œæˆ âœ…
1. âœ… **åŒ—å‘èµ„é‡‘** - API: `/api/akshare/fund-flow/north-bound/realtime`
2. âœ… **è¡Œä¸šæ¿å—** - API: `/api/akshare/fund-flow/industry/realtime`
3. âœ… **ç¤¾äº¤åª’ä½“** - API: `/api/akshare/social-media/all`

### ä½¿ç”¨æ–¹å¼
| æ•°æ®ç±»å‹ | æ™ºèƒ½ä½“ | APIç«¯ç‚¹ | å‰ç«¯é›†æˆ |
|---------|--------|---------|---------|
| åŒ—å‘èµ„é‡‘ | funds | `/api/akshare/fund-flow/north-bound/realtime` | â³ å¾…å¼€å‘ |
| è¡Œä¸šæ¿å— | industry | `/api/akshare/fund-flow/industry/realtime` | â³ å¾…å¼€å‘ |
| ç¤¾äº¤åª’ä½“ | social_analyst | `/api/akshare/social-media/all` | â³ å¾…å¼€å‘ |

---

## ğŸ“‹ ç¬¬3-4å‘¨è®¡åˆ’ï¼šé«˜çº§æ•°æ®

### å¾…å¼€å‘ â³
1. **å®è§‚ç»æµ** - æœåŠ¡ï¼šmacroï¼ˆå®è§‚æ”¿ç­–åˆ†æå¸ˆï¼‰
2. **æœŸæƒé£é™©** - æœåŠ¡ï¼šrisk_systemï¼ˆé£é™©ç³»ç»Ÿåˆ†æå¸ˆï¼‰
3. **å¸‚åœºæƒ…ç»ª** - æœåŠ¡ï¼šæ‰€æœ‰åˆ†æå¸ˆ

---

## ğŸ¨ å‰ç«¯é›†æˆï¼šç¤¾äº¤åª’ä½“ä¸“åŒº

### æ–°é—»é¢æ¿æ”¹é€ 

#### å½“å‰ç»“æ„
```
æ–°é—»é¢æ¿
â”œâ”€â”€ æ–°é—»åˆ—è¡¨
â””â”€â”€ çƒ­é—¨å…³é”®è¯ï¼ˆåº•éƒ¨ï¼‰
```

#### æ”¹é€ åç»“æ„
```
æ–°é—»é¢æ¿
â”œâ”€â”€ æ–°é—»åˆ—è¡¨
â””â”€â”€ ç¤¾äº¤åª’ä½“ä¸“åŒºï¼ˆåº•éƒ¨ï¼‰
    â”œâ”€â”€ å¾®åšçƒ­æœ
    â”œâ”€â”€ å¾®åšè‚¡ç¥¨çƒ­è®®
    â””â”€â”€ ç™¾åº¦çƒ­æœ
```

#### å®ç°æ­¥éª¤

1. **ä¿®æ”¹å‰ç«¯ç»„ä»¶**
   - æ–‡ä»¶: `alpha-council-vue/src/components/NewsPanel.vue`
   - æ·»åŠ ç¤¾äº¤åª’ä½“ä¸“åŒº

2. **è°ƒç”¨API**
   ```javascript
   async mounted() {
     // åŠ è½½ç¤¾äº¤åª’ä½“æ•°æ®
     const response = await fetch('http://localhost:8000/api/akshare/social-media/all')
     const data = await response.json()
     this.socialMediaData = data.data
   }
   ```

3. **å±•ç¤ºæ•°æ®**
   ```vue
   <div class="social-media-section">
     <h3>ğŸ“± ç¤¾äº¤åª’ä½“ä¸“åŒº</h3>
     
     <!-- å¾®åšçƒ­æœ -->
     <div class="weibo-hot-search">
       <h4>ğŸ”¥ å¾®åšçƒ­æœ</h4>
       <div v-for="item in socialMediaData.weibo_hot_search" :key="item.rank">
         {{ item.rank }}. {{ item.title }}
       </div>
     </div>
     
     <!-- å¾®åšè‚¡ç¥¨çƒ­è®® -->
     <div class="weibo-stock-hot">
       <h4>ğŸ’° å¾®åšè‚¡ç¥¨çƒ­è®®</h4>
       <div v-for="stock in socialMediaData.weibo_stock_hot" :key="stock.code">
         {{ stock.name }} ({{ stock.code }})
       </div>
     </div>
   </div>
   ```

---

## ğŸš€ å¿«é€Ÿæµ‹è¯•

### æµ‹è¯•APIæ˜¯å¦æ­£å¸¸

```bash
# 1. å¯åŠ¨åç«¯
python backend/server.py

# 2. æµ‹è¯•èµ„é‡‘æµå‘API
curl http://localhost:8000/api/akshare/fund-flow/600519

# 3. æµ‹è¯•è´¢åŠ¡æ•°æ®API
curl http://localhost:8000/api/akshare/financial/600519/summary

# 4. æµ‹è¯•ç¤¾äº¤åª’ä½“API
curl http://localhost:8000/api/akshare/social-media/all
```

### æµ‹è¯•æ•°æ®æ¨¡å—

```bash
# æµ‹è¯•èµ„é‡‘æµå‘
python test_akshare_fund_flow.py

# æµ‹è¯•è´¢åŠ¡æ•°æ®
python test_akshare_financial.py

# æµ‹è¯•ç¤¾äº¤åª’ä½“ï¼ˆå¾…åˆ›å»ºï¼‰
python test_akshare_social_media.py
```

---

## ğŸ“ æ€»ç»“

### å·²å®Œæˆ âœ…
1. âœ… æ•°æ®æ¨¡å—å¼€å‘ï¼ˆ4ä¸ªæ¨¡å—ï¼‰
2. âœ… APIç«¯ç‚¹åˆ›å»ºï¼ˆ12ä¸ªç«¯ç‚¹ï¼‰
3. âœ… æœåŠ¡å™¨é›†æˆ
4. âœ… æµ‹è¯•è„šæœ¬

### å¾…å®Œæˆ â³
1. â³ å‰ç«¯é›†æˆï¼ˆç¤¾äº¤åª’ä½“ä¸“åŒºï¼‰
2. â³ åˆ†æå¸ˆæç¤ºè¯æ›´æ–°
3. â³ æ•°æ®è‡ªåŠ¨æ³¨å…¥æµç¨‹
4. â³ å®è§‚ç»æµæ•°æ®
5. â³ æœŸæƒé£é™©æ•°æ®
6. â³ å¸‚åœºæƒ…ç»ªæ•°æ®

### ä¸‹ä¸€æ­¥
1. **ç«‹å³**: æµ‹è¯•APIç«¯ç‚¹
2. **ä»Šå¤©**: å‰ç«¯é›†æˆç¤¾äº¤åª’ä½“ä¸“åŒº
3. **æ˜å¤©**: å®è§‚ç»æµæ•°æ®é›†æˆ

---

**æ–‡æ¡£å®Œæˆæ—¶é—´**: 2025-12-05 06:10
