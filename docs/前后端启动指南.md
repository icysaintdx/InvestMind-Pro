# 🚀 InvestMindPro 前后端启动指南

**更新日期**: 2024-12-03 20:30  

## 📋 启动方式对比

| 启动脚本 | 用途 | 启动内容 | 推荐场景 |
|---------|------|---------|---------|
| **START_ALL.bat** | 前后端一体启动 | 后端 + 前端 | ✅ **日常使用** |
| **LAUNCH_SERVER.bat** | 后端完整启动 | 仅后端 | 🔧 后端开发/测试 |
| **STOP_ALL.bat** | 停止所有服务 | - | 🛑 关闭服务 |

---

## 🎯 一键启动（推荐）

### START_ALL.bat - 前后端一体启动

```bash
START_ALL.bat
```

**启动流程**：
1. ✅ 自动检查并修复依赖（NumPy/ChromaDB）
2. ✅ 设置Python环境变量
3. ✅ 启动后端服务器（端口8000）
4. ✅ 启动前端开发服务器（端口8080）

**访问地址**：
- 🌐 **前端界面**: http://localhost:8080
- 🔌 **后端API**: http://localhost:8000
- 📚 **API文档**: http://localhost:8000/docs

**特点**：
- 前后端分别在独立窗口运行
- 按任意键可同时停止所有服务
- 自动等待后端启动完成再启动前端

---

## 🔧 仅启动后端

### LAUNCH_SERVER.bat - 后端完整启动

```bash
LAUNCH_SERVER.bat
```

**启动流程**：
1. 检查并修复NumPy/ChromaDB兼容性
2. 测试配置工具函数
3. 测试API导入
4. 最终导入测试
5. 启动FastAPI服务器

**适用场景**：
- 后端开发和调试
- API测试
- 不需要前端界面时

---

## 🛑 停止服务

### STOP_ALL.bat - 停止所有服务

```bash
STOP_ALL.bat
```

**功能**：
- 停止所有InvestMindPro后端进程
- 停止所有InvestMindPro前端进程
- 释放8000和8080端口

---

## 📁 项目结构

```
D:\InvestMindPro\
├── START_ALL.bat           # 前后端一体启动 ⭐
├── LAUNCH_SERVER.bat       # 仅启动后端
├── STOP_ALL.bat           # 停止所有服务
├── backend/
│   └── server.py          # FastAPI后端服务器
└── alpha-council-vue/     # Vue3前端项目
    └── package.json
```

---

## ⚙️ 端口配置

| 服务 | 默认端口 | 配置文件 |
|------|---------|---------|
| 后端API | 8000 | `backend/server.py` |
| 前端开发服务器 | 8080 | `alpha-council-vue/vue.config.js` |

---

## 🔍 故障排查

### 问题1：端口被占用

**错误信息**：
```
Error: listen EADDRINUSE: address already in use :::8000
```

**解决方案**：
```bash
# 运行停止脚本
STOP_ALL.bat

# 或手动释放端口
netstat -ano | findstr :8000
taskkill /F /PID <进程ID>
```

### 问题2：前端无法连接后端

**检查**：
1. 后端是否成功启动（访问 http://localhost:8000/docs）
2. 前端API配置是否正确（检查 `alpha-council-vue/.env`）
3. 是否有CORS错误（查看浏览器控制台）

**解决**：
- 确保后端先启动完成
- 检查 `backend/server.py` 中的CORS配置

### 问题3：依赖错误

**运行诊断**：
```bash
python FINAL_STATUS.py
```

**常见修复**：
```bash
# NumPy/ChromaDB问题
python fix_chromadb_auto.py

# 配置工具问题
python test_config_utils_fix.py

# API导入问题
python test_api_import_fix.py
```

---

## 📝 开发建议

### 后端开发
```bash
# 使用LAUNCH_SERVER.bat启动后端
LAUNCH_SERVER.bat

# 在另一个终端运行测试
pytest backend/tests/
```

### 前端开发
```bash
# 确保后端已启动
LAUNCH_SERVER.bat

# 在alpha-council-vue目录启动前端
cd alpha-council-vue
npm run serve
```

### 全栈开发
```bash
# 一键启动前后端
START_ALL.bat

# 前端热重载会自动生效
# 后端修改需要重启服务器
```

---

## 🎉 快速开始示例

```bash
# 1. 克隆项目后首次启动
cd D:\InvestMindPro
npm install --prefix alpha-council-vue  # 安装前端依赖
pip install -r requirements.txt          # 安装后端依赖

# 2. 一键启动
START_ALL.bat

# 3. 访问应用
# 浏览器打开: http://localhost:8080

# 4. 开发完成后停止
STOP_ALL.bat
```

---

**祝开发顺利！** 🚀
