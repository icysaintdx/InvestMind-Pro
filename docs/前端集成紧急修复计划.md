# InvestMind-Pro å‰ç«¯é›†æˆç´§æ€¥ä¿®å¤è®¡åˆ’

**åˆ›å»ºæ—¶é—´**: 2025-12-15 23:48  
**ä¼˜å…ˆçº§**: ğŸ”¥ æœ€é«˜ä¼˜å…ˆçº§  
**çŠ¶æ€**: ğŸ“ å¾…æ‰§è¡Œ  

---

## ğŸš¨ é—®é¢˜åˆ†æ

### å½“å‰çŠ¶å†µ

ä½ è¯´å¾—å®Œå…¨æ­£ç¡®ï¼æˆ‘ä»¬å®Œæˆäº†å¤§é‡åç«¯åŠŸèƒ½ï¼Œä½†å‰ç«¯å‡ ä¹æ²¡æœ‰é›†æˆï¼š

```
åç«¯å®Œæˆåº¦: âœ… 95%
â”œâ”€ 13ä¸ªç­–ç•¥ âœ…
â”œâ”€ å›æµ‹å¼•æ“ âœ…
â”œâ”€ å‚æ•°ä¼˜åŒ– âœ…
â”œâ”€ LLMé…ç½® âœ…
â””â”€ ç­–ç•¥é€‰æ‹© âœ…

å‰ç«¯é›†æˆåº¦: âŒ 10%
â”œâ”€ ç­–ç•¥åˆ—è¡¨ âŒ ç©ºç™½
â”œâ”€ å›æµ‹åŠŸèƒ½ âŒ æ— æ³•ä½¿ç”¨
â”œâ”€ æ¨¡æ‹Ÿäº¤æ˜“ âŒ å¼€å‘ä¸­
â”œâ”€ LLMé…ç½® âŒ çœ‹ä¸åˆ°
â””â”€ ç­–ç•¥é€‰æ‹© âŒ æ— æ³•é€‰æ‹©
```

### å…·ä½“é—®é¢˜

#### 1. ç­–ç•¥å›æµ‹é¡µé¢
- âŒ **ç­–ç•¥åˆ—è¡¨ç©ºç™½** - å‰ç«¯è°ƒç”¨ `/api/backtest/strategies` ä½†APIä¸å­˜åœ¨
- âŒ **æ— æ³•é€‰æ‹©ç­–ç•¥** - æ²¡æœ‰æ•°æ®æº
- âŒ **å›æµ‹æ— æ³•è¿è¡Œ** - APIç«¯ç‚¹ä¸åŒ¹é…

#### 2. æ¨¡æ‹Ÿäº¤æ˜“é¡µé¢
- âŒ **åŠŸèƒ½å¼€å‘ä¸­** - å®Œå…¨æ²¡æœ‰å®ç°
- âŒ **æ— æ³•åˆ›å»ºæ¨¡æ‹Ÿç›˜** - æ²¡æœ‰APIé›†æˆ
- âŒ **æ— æ³•æŸ¥çœ‹æŒä»“** - æ²¡æœ‰æ•°æ®å±•ç¤º

#### 3. LLMé…ç½®ç®¡ç†
- âŒ **çœ‹ä¸åˆ°é…ç½®** - è™½ç„¶åç«¯æœ‰APIï¼Œä½†å‰ç«¯æ²¡æœ‰å…¥å£
- âŒ **æ— æ³•ä¿®æ”¹é…ç½®** - æ²¡æœ‰UIç•Œé¢
- âŒ **é…ç½®ä¸ç”Ÿæ•ˆ** - æ²¡æœ‰é›†æˆ

#### 4. ç­–ç•¥é€‰æ‹©ç³»ç»Ÿ
- âŒ **æ™ºèƒ½é€‰æ‹©ä¸å¯ç”¨** - å‰ç«¯æ²¡æœ‰è°ƒç”¨
- âŒ **21æ™ºèƒ½ä½“åˆ†æåæ— æ³•è‡ªåŠ¨é€‰ç­–ç•¥** - æ²¡æœ‰è”åŠ¨

---

## ğŸ¯ ç´§æ€¥ä¿®å¤è®¡åˆ’

### Phase 1: ç­–ç•¥å›æµ‹é¡µé¢ä¿®å¤ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰âš¡

#### ä»»åŠ¡1.1: åˆ›å»ºç­–ç•¥åˆ—è¡¨API
**æ–‡ä»¶**: `backend/api/backtest_api.py`

```python
@router.get("/strategies")
async def get_strategies():
    """è·å–æ‰€æœ‰å¯ç”¨ç­–ç•¥åˆ—è¡¨"""
    from backend.services.strategy.selector import StrategySelector
    
    selector = StrategySelector()
    strategies = selector._load_strategies()
    
    return {
        "success": True,
        "strategies": strategies,
        "total": len(strategies)
    }
```

#### ä»»åŠ¡1.2: ä¿®å¤å›æµ‹APIç«¯ç‚¹
**æ–‡ä»¶**: `backend/api/backtest_api.py`

ç¡®ä¿ä»¥ä¸‹ç«¯ç‚¹å­˜åœ¨ï¼š
- `POST /api/backtest/run` - è¿è¡Œå›æµ‹
- `GET /api/backtest/strategies` - è·å–ç­–ç•¥åˆ—è¡¨
- `GET /api/backtest/result/{task_id}` - è·å–å›æµ‹ç»“æœ

#### ä»»åŠ¡1.3: å‰ç«¯è°ƒç”¨ä¿®å¤
**æ–‡ä»¶**: `alpha-council-vue/src/views/BacktestView.vue`

ä¿®å¤APIè°ƒç”¨è·¯å¾„ï¼Œç¡®ä¿ä¸åç«¯åŒ¹é…ã€‚

---

### Phase 2: æ¨¡æ‹Ÿäº¤æ˜“åŠŸèƒ½å®ç°ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰ğŸ”¥

#### ä»»åŠ¡2.1: åˆ›å»ºæ¨¡æ‹Ÿäº¤æ˜“API
**æ–‡ä»¶**: `backend/api/paper_trading_api.py`

```python
@router.post("/create")
async def create_paper_account():
    """åˆ›å»ºæ¨¡æ‹Ÿè´¦æˆ·"""
    pass

@router.get("/positions")
async def get_positions():
    """è·å–æŒä»“"""
    pass

@router.post("/order")
async def place_order():
    """ä¸‹å•"""
    pass
```

#### ä»»åŠ¡2.2: å‰ç«¯æ¨¡æ‹Ÿäº¤æ˜“é¡µé¢
**æ–‡ä»¶**: `alpha-council-vue/src/PaperTrading/index.vue`

å®ç°å®Œæ•´çš„æ¨¡æ‹Ÿäº¤æ˜“UIï¼š
- è´¦æˆ·æ€»è§ˆ
- æŒä»“åˆ—è¡¨
- äº¤æ˜“è®°å½•
- ä¸‹å•åŠŸèƒ½

---

### Phase 3: LLMé…ç½®ç®¡ç†ç•Œé¢ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰ğŸ“

#### ä»»åŠ¡3.1: åˆ›å»ºLLMé…ç½®é¡µé¢
**æ–‡ä»¶**: `alpha-council-vue/src/views/LLMConfigView.vue`

åŠŸèƒ½ï¼š
- æŸ¥çœ‹æ‰€æœ‰LLMä»»åŠ¡é…ç½®
- ä¿®æ”¹æ¨¡å‹é€‰æ‹©
- è°ƒæ•´å‚æ•°
- æµ‹è¯•é…ç½®

#### ä»»åŠ¡3.2: é›†æˆåˆ°å¯¼èˆªèœå•
**æ–‡ä»¶**: `alpha-council-vue/src/App.vue`

æ·»åŠ "LLMé…ç½®"èœå•é¡¹ã€‚

---

### Phase 4: æ™ºèƒ½ç­–ç•¥é€‰æ‹©è”åŠ¨ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰ğŸ¤–

#### ä»»åŠ¡4.1: åˆ†æå®Œæˆåè‡ªåŠ¨è§¦å‘
**æ–‡ä»¶**: `alpha-council-vue/src/views/AnalysisView.vue`

åœ¨21æ™ºèƒ½ä½“åˆ†æå®Œæˆåï¼š
1. è‡ªåŠ¨è°ƒç”¨ç­–ç•¥é€‰æ‹©API
2. å±•ç¤ºæ¨èç­–ç•¥
3. æä¾›ä¸€é”®å›æµ‹æŒ‰é’®

#### ä»»åŠ¡4.2: ç­–ç•¥é€‰æ‹©ç»“æœå±•ç¤º
åˆ›å»ºç­–ç•¥æ¨èå¡ç‰‡ç»„ä»¶ï¼Œå±•ç¤ºï¼š
- æ¨èç­–ç•¥
- æ¨èç†ç”±
- é¢„æœŸè¡¨ç°
- å¿«é€Ÿæ“ä½œæŒ‰é’®

---

## ğŸ“‹ è¯¦ç»†ä»»åŠ¡æ¸…å•

### ç´§æ€¥ä»»åŠ¡ï¼ˆä»Šæ™šå¿…é¡»å®Œæˆï¼‰

| # | ä»»åŠ¡ | æ–‡ä»¶ | ä¼˜å…ˆçº§ | é¢„è®¡æ—¶é—´ |
|---|------|------|--------|---------|
| 1 | åˆ›å»ºç­–ç•¥åˆ—è¡¨API | backtest_api.py | ğŸ”¥ æœ€é«˜ | 10åˆ†é’Ÿ |
| 2 | ä¿®å¤å‰ç«¯APIè°ƒç”¨ | BacktestView.vue | ğŸ”¥ æœ€é«˜ | 15åˆ†é’Ÿ |
| 3 | æµ‹è¯•ç­–ç•¥åˆ—è¡¨æ˜¾ç¤º | - | ğŸ”¥ æœ€é«˜ | 5åˆ†é’Ÿ |
| 4 | ä¿®å¤å›æµ‹è¿è¡ŒåŠŸèƒ½ | backtest_api.py | ğŸ”¥ æœ€é«˜ | 20åˆ†é’Ÿ |
| 5 | æµ‹è¯•å®Œæ•´å›æµ‹æµç¨‹ | - | ğŸ”¥ æœ€é«˜ | 10åˆ†é’Ÿ |

**æ€»è®¡**: çº¦60åˆ†é’Ÿ

### çŸ­æœŸä»»åŠ¡ï¼ˆæ˜å¤©å®Œæˆï¼‰

| # | ä»»åŠ¡ | ä¼˜å…ˆçº§ | é¢„è®¡æ—¶é—´ |
|---|------|--------|---------|
| 6 | åˆ›å»ºæ¨¡æ‹Ÿäº¤æ˜“API | ğŸ”¥ é«˜ | 2å°æ—¶ |
| 7 | å®ç°æ¨¡æ‹Ÿäº¤æ˜“å‰ç«¯ | ğŸ”¥ é«˜ | 3å°æ—¶ |
| 8 | åˆ›å»ºLLMé…ç½®é¡µé¢ | ğŸ“ ä¸­ | 2å°æ—¶ |
| 9 | æ™ºèƒ½ç­–ç•¥é€‰æ‹©è”åŠ¨ | ğŸ“ ä¸­ | 2å°æ—¶ |

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. ç­–ç•¥åˆ—è¡¨APIå®ç°

```python
# backend/api/backtest_api.py

@router.get("/strategies", response_model=StrategiesResponse)
async def get_strategies():
    """
    è·å–æ‰€æœ‰å¯ç”¨ç­–ç•¥åˆ—è¡¨
    
    Returns:
        ç­–ç•¥åˆ—è¡¨ï¼ŒåŒ…å«ï¼š
        - id: ç­–ç•¥ID
        - name: ç­–ç•¥åç§°
        - category: ç±»åˆ«
        - description: æè¿°
        - parameters: å‚æ•°
        - avgWinRate: å¹³å‡èƒœç‡
    """
    try:
        from backend.services.strategy.selector import StrategySelector
        
        selector = StrategySelector()
        strategies = selector._load_strategies()
        
        # æ ¼å¼åŒ–ä¸ºå‰ç«¯éœ€è¦çš„æ ¼å¼
        formatted_strategies = []
        for strategy in strategies:
            formatted_strategies.append({
                "id": strategy["strategy_id"],
                "name": strategy["name"],
                "category": strategy["category"],
                "description": strategy["description"],
                "parameters": strategy["parameters"],
                "avgWinRate": 0.65,  # é»˜è®¤å€¼ï¼Œåç»­å¯ä»å†å²æ•°æ®è·å–
                "icon": get_category_icon(strategy["category"])
            })
        
        return {
            "success": True,
            "strategies": formatted_strategies,
            "total": len(formatted_strategies)
        }
        
    except Exception as e:
        logger.error(f"è·å–ç­–ç•¥åˆ—è¡¨å¤±è´¥: {e}")
        raise HTTPException(status_code=500, detail=str(e))

def get_category_icon(category: str) -> str:
    """è·å–ç±»åˆ«å›¾æ ‡"""
    icons = {
        "technical": "ğŸ“Š",
        "ai_composite": "ğŸ¤–",
        "trend_following": "ğŸ“ˆ",
        "folk_strategy": "ğŸ¯",
        "value_investing": "ğŸ’"
    }
    return icons.get(category, "ğŸ“Œ")
```

### 2. å›æµ‹è¿è¡ŒAPIå®ç°

```python
@router.post("/run", response_model=BacktestResponse)
async def run_backtest(request: BacktestRequest):
    """
    è¿è¡Œç­–ç•¥å›æµ‹
    
    Args:
        request: å›æµ‹è¯·æ±‚
        - stock_code: è‚¡ç¥¨ä»£ç 
        - strategy_id: ç­–ç•¥ID
        - start_date: å¼€å§‹æ—¥æœŸ
        - end_date: ç»“æŸæ—¥æœŸ
        - initial_capital: åˆå§‹èµ„é‡‘
        - parameters: ç­–ç•¥å‚æ•°
    
    Returns:
        å›æµ‹ç»“æœ
    """
    try:
        # 1. åŠ è½½æ•°æ®
        from backend.backtest.data_loader import DataLoader
        loader = DataLoader()
        data = await loader.load_stock_data(
            request.stock_code,
            request.start_date,
            request.end_date
        )
        
        if data is None or len(data) < 30:
            raise HTTPException(status_code=400, detail="æ•°æ®ä¸è¶³")
        
        # 2. åˆ›å»ºç­–ç•¥
        from backend.services.strategy.selector import StrategySelector
        selector = StrategySelector()
        strategy = selector._get_strategy_instance(request.strategy_id)
        
        if strategy is None:
            raise HTTPException(status_code=404, detail="ç­–ç•¥ä¸å­˜åœ¨")
        
        # 3. è¿è¡Œå›æµ‹
        from backend.backtest.engine import BacktestEngine, BacktestConfig
        config = BacktestConfig(
            initial_capital=request.initial_capital,
            commission_rate=0.0003,
            slippage_rate=0.0001
        )
        engine = BacktestEngine(config)
        result = engine.run(strategy, data, request.stock_code)
        
        # 4. æ ¼å¼åŒ–ç»“æœ
        return {
            "success": True,
            "result": {
                "metrics": {
                    "total_return": result.metrics.total_return,
                    "annual_return": result.metrics.annual_return,
                    "max_drawdown": result.metrics.max_drawdown,
                    "sharpe_ratio": result.metrics.sharpe_ratio,
                    "win_rate": result.metrics.win_rate,
                    "total_trades": result.metrics.total_trades
                },
                "equity_curve": result.equity_curve.to_dict(),
                "trades": [
                    {
                        "date": trade.timestamp,
                        "type": trade.side,
                        "price": trade.price,
                        "quantity": trade.quantity,
                        "amount": trade.total_cost,
                        "reason": trade.signal.reason if hasattr(trade, 'signal') else ""
                    }
                    for trade in result.trades
                ]
            }
        }
        
    except Exception as e:
        logger.error(f"å›æµ‹è¿è¡Œå¤±è´¥: {e}")
        raise HTTPException(status_code=500, detail=str(e))
```

### 3. å‰ç«¯APIè°ƒç”¨ä¿®å¤

```javascript
// alpha-council-vue/src/views/BacktestView.vue

// åŠ è½½ç­–ç•¥åˆ—è¡¨
const loadStrategies = async () => {
  try {
    const response = await axios.get('http://localhost:8000/api/backtest/strategies')
    strategies.value = response.data.strategies
    console.log('åŠ è½½ç­–ç•¥åˆ—è¡¨æˆåŠŸ:', strategies.value.length)
  } catch (error) {
    console.error('åŠ è½½ç­–ç•¥åˆ—è¡¨å¤±è´¥:', error)
    // æ˜¾ç¤ºé”™è¯¯æç¤º
  }
}

// è¿è¡Œå›æµ‹
const runBacktest = async () => {
  if (!config.strategyId) {
    alert('è¯·é€‰æ‹©ç­–ç•¥')
    return
  }
  
  isRunning.value = true
  loadingMessage.value = 'æ­£åœ¨åŠ è½½æ•°æ®...'
  
  try {
    const response = await axios.post('http://localhost:8000/api/backtest/run', {
      stock_code: config.stockCode,
      strategy_id: config.strategyId,
      start_date: config.startDate,
      end_date: config.endDate,
      initial_capital: config.initialCapital,
      parameters: strategyParams
    })
    
    backtestResult.value = response.data.result
    console.log('å›æµ‹å®Œæˆ:', backtestResult.value)
    
  } catch (error) {
    console.error('å›æµ‹å¤±è´¥:', error)
    alert('å›æµ‹å¤±è´¥: ' + error.message)
  } finally {
    isRunning.value = false
  }
}
```

---

## ğŸš€ ç«‹å³æ‰§è¡Œæ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šä¿®å¤ç­–ç•¥åˆ—è¡¨ï¼ˆ10åˆ†é’Ÿï¼‰

1. æ‰“å¼€ `backend/api/backtest_api.py`
2. æ·»åŠ  `get_strategies` ç«¯ç‚¹
3. æµ‹è¯•API: `curl http://localhost:8000/api/backtest/strategies`

### ç¬¬äºŒæ­¥ï¼šä¿®å¤å‰ç«¯è°ƒç”¨ï¼ˆ15åˆ†é’Ÿï¼‰

1. æ‰“å¼€ `BacktestView.vue`
2. ä¿®å¤APIè·¯å¾„
3. æµ‹è¯•ç­–ç•¥åˆ—è¡¨æ˜¾ç¤º

### ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•å®Œæ•´æµç¨‹ï¼ˆ10åˆ†é’Ÿï¼‰

1. å¯åŠ¨å‰åç«¯
2. æ‰“å¼€ç­–ç•¥å›æµ‹é¡µé¢
3. éªŒè¯ç­–ç•¥åˆ—è¡¨æ˜¾ç¤º
4. é€‰æ‹©ç­–ç•¥å¹¶è¿è¡Œå›æµ‹
5. æŸ¥çœ‹ç»“æœ

---

## ğŸ“Š é¢„æœŸæ•ˆæœ

### ä¿®å¤åçš„ç”¨æˆ·ä½“éªŒ

```
ç”¨æˆ·æ“ä½œæµç¨‹:
1. æ‰“å¼€ç­–ç•¥å›æµ‹é¡µé¢ âœ…
2. çœ‹åˆ°13ä¸ªç­–ç•¥å¡ç‰‡ âœ…
3. é€‰æ‹©"å·´è²ç‰¹ä»·å€¼æŠ•èµ„" âœ…
4. è¾“å…¥è‚¡ç¥¨ä»£ç "600519" âœ…
5. é€‰æ‹©æ—¶é—´èŒƒå›´ âœ…
6. ç‚¹å‡»"å¼€å§‹å›æµ‹" âœ…
7. çœ‹åˆ°å›æµ‹è¿›åº¦ âœ…
8. æŸ¥çœ‹å›æµ‹ç»“æœ âœ…
   - æ”¶ç›Šç‡æ›²çº¿ âœ…
   - æ€§èƒ½æŒ‡æ ‡ âœ…
   - äº¤æ˜“è®°å½• âœ…
```

---

## ğŸ’¡ åç»­ä¼˜åŒ–

### çŸ­æœŸï¼ˆ1-2å¤©ï¼‰
- âœ… æ¨¡æ‹Ÿäº¤æ˜“åŠŸèƒ½å®Œæ•´å®ç°
- âœ… LLMé…ç½®ç®¡ç†ç•Œé¢
- âœ… ç­–ç•¥é€‰æ‹©æ™ºèƒ½è”åŠ¨

### ä¸­æœŸï¼ˆ1å‘¨ï¼‰
- âœ… å‚æ•°ä¼˜åŒ–ç•Œé¢
- âœ… ç»„åˆç­–ç•¥é…ç½®
- âœ… å®æ—¶ç›‘æ§é¢æ¿

### é•¿æœŸï¼ˆ1æœˆï¼‰
- âœ… ç­–ç•¥å¸‚åœº
- âœ… ç¤¾åŒºåˆ†äº«
- âœ… AIåŠ©æ‰‹

---

## ğŸ¯ æˆåŠŸæ ‡å‡†

### å¿…é¡»è¾¾åˆ°çš„ç›®æ ‡

- âœ… ç­–ç•¥åˆ—è¡¨æ­£å¸¸æ˜¾ç¤ºï¼ˆ13ä¸ªç­–ç•¥ï¼‰
- âœ… å¯ä»¥é€‰æ‹©ä»»æ„ç­–ç•¥
- âœ… å›æµ‹å¯ä»¥æ­£å¸¸è¿è¡Œ
- âœ… ç»“æœå¯ä»¥æ­£å¸¸å±•ç¤º
- âœ… æ¨¡æ‹Ÿäº¤æ˜“åŸºæœ¬å¯ç”¨

### éªŒæ”¶æ ‡å‡†

1. **ç­–ç•¥å›æµ‹**
   - ç­–ç•¥åˆ—è¡¨å®Œæ•´æ˜¾ç¤º
   - å¯ä»¥é€‰æ‹©å¹¶è¿è¡Œå›æµ‹
   - ç»“æœå‡†ç¡®å±•ç¤º

2. **æ¨¡æ‹Ÿäº¤æ˜“**
   - å¯ä»¥åˆ›å»ºæ¨¡æ‹Ÿè´¦æˆ·
   - å¯ä»¥æŸ¥çœ‹æŒä»“
   - å¯ä»¥ä¸‹å•äº¤æ˜“

3. **LLMé…ç½®**
   - å¯ä»¥æŸ¥çœ‹é…ç½®
   - å¯ä»¥ä¿®æ”¹é…ç½®
   - é…ç½®ç«‹å³ç”Ÿæ•ˆ

---

**ç«‹å³å¼€å§‹ä¿®å¤å—ï¼Ÿæˆ‘ä¼šå…ˆä»æœ€ç´§æ€¥çš„ç­–ç•¥åˆ—è¡¨APIå¼€å§‹ï¼**
