# æ™ºèƒ½ä½“ä¾èµ–å…³ç³»åˆ†æä¸ä¼˜åŒ–æ–¹æ¡ˆ

## ğŸ“Š ä¸€ã€æ™ºèƒ½ä½“ä¾èµ–å…³ç³»å®Œæ•´åˆ†æ

### 1.1 å››é˜¶æ®µæ‰§è¡Œæµç¨‹

```mermaid
graph TD
    subgraph ç¬¬ä¸€é˜¶æ®µ[ç¬¬ä¸€é˜¶æ®µï¼šå…¨ç»´ä¿¡æ¯é‡‡é›†]
        subgraph Step1.1[æ•°æ®é‡‡é›†å±‚]
            A1[ğŸ“° news_analyst<br/>æ–°é—»èˆ†æƒ…åˆ†æå¸ˆ]
            A2[ğŸ—£ï¸ social_analyst<br/>ç¤¾äº¤åª’ä½“åˆ†æå¸ˆ]
            A3[ğŸ‡¨ğŸ‡³ china_market<br/>ä¸­å›½å¸‚åœºä¸“å®¶]
        end
        
        subgraph Step1.2[è¡Œä¸šå®è§‚å±‚]
            B1[ğŸ­ industry<br/>è¡Œä¸šè½®åŠ¨åˆ†æå¸ˆ]
            B2[ğŸŒ macro<br/>å®è§‚æ”¿ç­–åˆ†æå¸ˆ]
        end
        
        subgraph Step1.3[ä¸“ä¸šåˆ†æå±‚]
            C1[ğŸ“ˆ technical<br/>æŠ€æœ¯åˆ†æä¸“å®¶]
            C2[ğŸ’° funds<br/>èµ„é‡‘æµå‘åˆ†æå¸ˆ]
            C3[ğŸ’¼ fundamental<br/>åŸºæœ¬é¢ä¼°å€¼åˆ†æå¸ˆ]
        end
    end
    
    subgraph ç¬¬äºŒé˜¶æ®µ[ç¬¬äºŒé˜¶æ®µï¼šç­–ç•¥æ•´åˆ]
        D1[ğŸ‚ bull_researcher<br/>çœ‹æ¶¨ç ”ç©¶å‘˜]
        D2[ğŸ» bear_researcher<br/>çœ‹è·Œç ”ç©¶å‘˜]
        D3[ğŸ‘” manager_fundamental<br/>åŸºæœ¬é¢ç ”ç©¶æ€»ç›‘]
        D4[âš¡ manager_momentum<br/>å¸‚åœºåŠ¨èƒ½æ€»ç›‘]
        D5[ğŸ“ research_manager<br/>ç ”ç©¶éƒ¨ç»ç†]
    end
    
    subgraph ç¬¬ä¸‰é˜¶æ®µ[ç¬¬ä¸‰é˜¶æ®µï¼šé£æ§è¯„ä¼°]
        E1[âš”ï¸ risk_aggressive<br/>æ¿€è¿›é£æ§å¸ˆ]
        E2[ğŸ›¡ï¸ risk_conservative<br/>ä¿å®ˆé£æ§å¸ˆ]
        E3[âš–ï¸ risk_neutral<br/>ä¸­ç«‹é£æ§å¸ˆ]
        E4[âš ï¸ risk_system<br/>ç³»ç»Ÿæ€§é£é™©æ€»ç›‘]
        E5[ğŸ“‰ risk_portfolio<br/>ç»„åˆé£é™©æ€»ç›‘]
        E6[ğŸ‘® risk_manager<br/>é£æ§éƒ¨ç»ç†]
    end
    
    subgraph ç¬¬å››é˜¶æ®µ[ç¬¬å››é˜¶æ®µï¼šå†³ç­–æ‰§è¡Œ]
        F1[ğŸ‘‘ gm<br/>æŠ•èµ„å†³ç­–æ€»ç»ç†]
        F2[ğŸ¤– trader<br/>é‡åŒ–äº¤æ˜“å‘˜]
        F3[ğŸ“¢ interpreter<br/>ç™½è¯è§£è¯»å‘˜]
    end
    
    %% ç¬¬ä¸€é˜¶æ®µå†…éƒ¨ä¾èµ–
    A1 --> B1
    A2 --> B1
    A3 --> B2
    
    %% ç¬¬äºŒé˜¶æ®µä¾èµ–
    A1 --> D1
    A1 --> D2
    C3 --> D1
    C3 --> D2
    C1 --> D1
    C1 --> D2
    
    C3 --> D3
    B2 --> D3
    B1 --> D3
    
    C1 --> D4
    C2 --> D4
    
    D1 --> D5
    D2 --> D5
    
    %% ç¬¬ä¸‰é˜¶æ®µä¾èµ–
    D3 --> E4
    D4 --> E4
    D3 --> E5
    D4 --> E5
    
    E1 --> E6
    E2 --> E6
    E3 --> E6
    
    %% ç¬¬å››é˜¶æ®µä¾èµ–
    E4 --> F1
    E5 --> F1
    E6 --> F2
    F1 --> F2
```

### 1.2 ä¾èµ–å…³ç³»è¯¦ç»†åˆ—è¡¨

| æ™ºèƒ½ä½“ID | æ™ºèƒ½ä½“åç§° | é˜¶æ®µ | ç›´æ¥ä¾èµ– | è¢«ä¾èµ–äº |
|---------|----------|------|---------|---------|
| **ç¬¬ä¸€é˜¶æ®µ - æ•°æ®é‡‡é›†å±‚** |
| news_analyst | æ–°é—»èˆ†æƒ…åˆ†æå¸ˆ | 1 | æ—  | industry, bull_researcher, bear_researcher |
| social_analyst | ç¤¾äº¤åª’ä½“åˆ†æå¸ˆ | 1 | æ—  | industry |
| china_market | ä¸­å›½å¸‚åœºä¸“å®¶ | 1 | æ—  | macro |
| **ç¬¬ä¸€é˜¶æ®µ - è¡Œä¸šå®è§‚å±‚** |
| industry | è¡Œä¸šè½®åŠ¨åˆ†æå¸ˆ | 1 | news_analyst, social_analyst | manager_fundamental |
| macro | å®è§‚æ”¿ç­–åˆ†æå¸ˆ | 1 | china_market | manager_fundamental |
| **ç¬¬ä¸€é˜¶æ®µ - ä¸“ä¸šåˆ†æå±‚** |
| technical | æŠ€æœ¯åˆ†æä¸“å®¶ | 1 | æ—  | bull_researcher, bear_researcher, manager_momentum |
| funds | èµ„é‡‘æµå‘åˆ†æå¸ˆ | 1 | æ—  | manager_momentum |
| fundamental | åŸºæœ¬é¢ä¼°å€¼åˆ†æå¸ˆ | 1 | æ—  | bull_researcher, bear_researcher, manager_fundamental |
| **ç¬¬äºŒé˜¶æ®µ - ç­–ç•¥æ•´åˆ** |
| bull_researcher | çœ‹æ¶¨ç ”ç©¶å‘˜ | 2 | news_analyst, fundamental, technical | research_manager |
| bear_researcher | çœ‹è·Œç ”ç©¶å‘˜ | 2 | news_analyst, fundamental, technical | research_manager |
| manager_fundamental | åŸºæœ¬é¢ç ”ç©¶æ€»ç›‘ | 2 | fundamental, macro, industry | risk_system, risk_portfolio |
| manager_momentum | å¸‚åœºåŠ¨èƒ½æ€»ç›‘ | 2 | technical, funds | risk_system, risk_portfolio |
| research_manager | ç ”ç©¶éƒ¨ç»ç† | 2 | bull_researcher, bear_researcher | æ—  |
| **ç¬¬ä¸‰é˜¶æ®µ - é£æ§è¯„ä¼°** |
| risk_aggressive | æ¿€è¿›é£æ§å¸ˆ | 3 | æ—  | risk_manager |
| risk_conservative | ä¿å®ˆé£æ§å¸ˆ | 3 | æ—  | risk_manager |
| risk_neutral | ä¸­ç«‹é£æ§å¸ˆ | 3 | æ—  | risk_manager |
| risk_system | ç³»ç»Ÿæ€§é£é™©æ€»ç›‘ | 3 | manager_fundamental, manager_momentum | gm |
| risk_portfolio | ç»„åˆé£é™©æ€»ç›‘ | 3 | manager_fundamental, manager_momentum | gm |
| risk_manager | é£æ§éƒ¨ç»ç† | 3 | risk_aggressive, risk_conservative, risk_neutral | trader |
| **ç¬¬å››é˜¶æ®µ - å†³ç­–æ‰§è¡Œ** |
| gm | æŠ•èµ„å†³ç­–æ€»ç»ç† | 4 | risk_system, risk_portfolio | trader |
| trader | é‡åŒ–äº¤æ˜“å‘˜ | 4 | gm, risk_manager | æ—  |
| interpreter | ç™½è¯è§£è¯»å‘˜ | 4 | æ— ï¼ˆä½†ä¾èµ–æ‰€æœ‰ç»“æœï¼‰ | æ—  |

### 1.3 å…³é”®ä¾èµ–é“¾è·¯

#### 3æ¡æ ¸å¿ƒä¾èµ–é“¾ï¼šæŠ•èµ„å†³ç­–é“¾ã€é£æ§é“¾ã€ä»·å€¼åˆ†æé“¾
#### 4ä¸ªå†—ä½™æ™ºèƒ½ä½“ï¼šchina_marketã€social_analystã€risk_systemã€manager_momentum
#### 9ä¸ªæ ¸å¿ƒå¿…éœ€æ™ºèƒ½ä½“ï¼šä¸å¯ç¦ç”¨ï¼Œæ˜¯ç³»ç»Ÿè¿è¡Œçš„åŸºç¡€

1. **æ ¸å¿ƒä»·å€¼é“¾**ï¼š
   ```
   news_analyst â†’ bull/bear_researcher â†’ research_manager â†’ æŠ•èµ„å»ºè®®
   fundamental â†’ manager_fundamental â†’ risk_system â†’ gm â†’ trader â†’ äº¤æ˜“æ‰§è¡Œ
   ```

2. **é£é™©æ§åˆ¶é“¾**ï¼š
   ```
   risk_aggressive/conservative/neutral â†’ risk_manager â†’ trader
   manager_fundamental/momentum â†’ risk_system/portfolio â†’ gm
   ```

3. **ç‹¬ç«‹åˆ†æé“¾**ï¼ˆå¯å¹¶è¡Œï¼‰ï¼š
   - china_marketï¼ˆä»…å½±å“macroï¼‰
   - social_analystï¼ˆä»…å½±å“industryï¼‰
   - fundsï¼ˆä»…å½±å“manager_momentumï¼‰

## ğŸ¯ äºŒã€é—®é¢˜è¯Šæ–­

### 2.1 å†—ä½™æ™ºèƒ½ä½“è¯†åˆ«

åŸºäºä¾èµ–åˆ†æï¼Œä»¥ä¸‹æ™ºèƒ½ä½“å­˜åœ¨ä»·å€¼é‡å æˆ–ä½œç”¨æœ‰é™ï¼š

| æ™ºèƒ½ä½“ | é—®é¢˜ | å½±å“èŒƒå›´ |
|-------|-----|---------|
| china_market | åŠŸèƒ½ä¸macroé‡å ï¼Œä¸“æ³¨åº¦è¿‡çª„ | ä»…å½±å“macro |
| social_analyst | ä¸news_analyståŠŸèƒ½é‡å  | ä»…å½±å“industry |
| risk_system | ä¸risk_portfolioåŠŸèƒ½ç›¸ä¼¼ | éƒ½å½±å“gm |
| manager_momentum | åŠŸèƒ½è¾ƒå•ä¸€ï¼Œä»…æ•´åˆ2ä¸ªæº | å½±å“é£é™©è¯„ä¼° |

### 2.2 ç“¶é¢ˆæ™ºèƒ½ä½“è¯†åˆ«

| æ™ºèƒ½ä½“ | ç“¶é¢ˆåŸå›  | è¢«ä¾èµ–æ¬¡æ•° |
|-------|---------|----------|
| news_analyst | è¢«å¤šä¸ªæ ¸å¿ƒæ™ºèƒ½ä½“ä¾èµ– | 3æ¬¡ |
| fundamental | å½±å“æŠ•èµ„å†³ç­–æ ¸å¿ƒ | 3æ¬¡ |
| manager_fundamental | é£é™©è¯„ä¼°å…¥å£ | 2æ¬¡ |



### é€‰å¯ç”¨åŠŸèƒ½è®¾è®¡
æä¾›äº†å®Œæ•´çš„å®ç°æ–¹æ¡ˆï¼š

1ã€æ™ºèƒ½ä¾èµ–ç®¡ç†ï¼š
- è‡ªåŠ¨å¯ç”¨å¿…éœ€ä¾èµ–
- ç¦ç”¨æ£€æŸ¥ä¸é™çº§æ–¹æ¡ˆ
- å½±å“é¢„è§ˆä¸è­¦å‘Šæç¤º

2ã€ä¸‰ç§é»˜è®¤é…ç½®ï¼š
- æœ€å°åŒ–é…ç½®ï¼š9ä¸ªæ™ºèƒ½ä½“ï¼Œ45ç§’ï¼Œé€‚åˆå¿«é€Ÿå†³ç­–
- å¹³è¡¡é…ç½®ï¼š15ä¸ªæ™ºèƒ½ä½“ï¼Œ75ç§’ï¼Œæ—¥å¸¸åˆ†æ
- å®Œæ•´é…ç½®ï¼š21ä¸ªæ™ºèƒ½ä½“ï¼Œ120ç§’ï¼Œæ·±åº¦ç ”ç©¶

3ã€å‰åç«¯å®ç°æ–¹æ¡ˆï¼š
- åç«¯APIï¼šé…ç½®éªŒè¯ã€ä¾èµ–æ£€æŸ¥ã€å½±å“è®¡ç®—
- å‰ç«¯ç•Œé¢ï¼šåˆ†ç»„å±•ç¤ºã€å¿«é€Ÿé…ç½®ã€å½±å“é¢„è§ˆ

### å¯ä»¥å®‰å…¨ç¦ç”¨çš„æ™ºèƒ½ä½“ï¼ˆä¸å½±å“æ ¸å¿ƒåŠŸèƒ½ï¼‰ï¼š

- china_market - åŠŸèƒ½è¢«macroè¦†ç›–
- social_analyst - åŠŸèƒ½è¢«news_analystè¦†ç›–
- manager_momentum - ä»…æ•´åˆ2ä¸ªæ•°æ®æºï¼Œä»·å€¼æœ‰é™
- risk_system/portfolio - åŠŸèƒ½é‡å ï¼Œä¿ç•™å…¶ä¸€å³å¯
- interpreter - ç™½è¯è§£è¯»ï¼Œå¯æŒ‰éœ€å¯ç”¨

ç»ä¸èƒ½ç¦ç”¨çš„æ™ºèƒ½ä½“ï¼ˆä¼šç ´åç³»ç»Ÿï¼‰ï¼š

- news_analyst - åŸºç¡€ä¿¡æ¯æº
- fundamental/technical - æ ¸å¿ƒåˆ†æ
- bull/bear_researcher - è¾©è®ºå¿…éœ€
- research_manager - æŠ•èµ„å»ºè®®ç”Ÿæˆ
- gm/trader - å†³ç­–æ‰§è¡Œ

## ğŸ’¡ ä¸‰ã€å¯é€‰å¯ç”¨åŠŸèƒ½è®¾è®¡æ–¹æ¡ˆ

### 3.1 æ™ºèƒ½ä½“åˆ†çº§ç­–ç•¥

å°†æ™ºèƒ½ä½“åˆ†ä¸ºä¸‰ä¸ªçº§åˆ«ï¼š

```typescript
enum AgentPriority {
  CORE = "æ ¸å¿ƒå¿…éœ€",      // ä¸å¯ç¦ç”¨
  IMPORTANT = "é‡è¦å¢å¼º", // å¯é€‰ä½†å½±å“è´¨é‡
  OPTIONAL = "å¯é€‰è¡¥å……"   // å¯è‡ªç”±å¯ç”¨/ç¦ç”¨
}
```

### 3.2 æ™ºèƒ½ä½“ä¼˜å…ˆçº§é…ç½®

```javascript
const AGENT_PRIORITY_CONFIG = {
  // æ ¸å¿ƒå¿…éœ€ï¼ˆä¸å¯ç¦ç”¨ï¼‰
  CORE: [
    'news_analyst',        // åŸºç¡€ä¿¡æ¯æº
    'fundamental',         // åŸºæœ¬é¢åˆ†æ
    'technical',          // æŠ€æœ¯é¢åˆ†æ
    'bull_researcher',    // å¤šç©ºè¾©è®ºå¿…éœ€
    'bear_researcher',    // å¤šç©ºè¾©è®ºå¿…éœ€
    'research_manager',   // æŠ•èµ„å»ºè®®ç”Ÿæˆ
    'risk_manager',       // é£æ§å†³ç­–
    'gm',                // æœ€ç»ˆå†³ç­–
    'trader'             // äº¤æ˜“æ‰§è¡Œ
  ],
  
  // é‡è¦å¢å¼ºï¼ˆé»˜è®¤å¯ç”¨ï¼Œå¯é€‰ç¦ç”¨ï¼‰
  IMPORTANT: [
    'macro',             // å®è§‚åˆ†æ
    'industry',          // è¡Œä¸šåˆ†æ
    'funds',             // èµ„é‡‘æµå‘
    'manager_fundamental', // åŸºæœ¬é¢æ•´åˆ
    'risk_aggressive',   // é£æ§è¾©è®º
    'risk_conservative', // é£æ§è¾©è®º
    'risk_neutral'       // é£æ§è¾©è®º
  ],
  
  // å¯é€‰è¡¥å……ï¼ˆé»˜è®¤ç¦ç”¨ï¼Œå¯é€‰å¯ç”¨ï¼‰
  OPTIONAL: [
    'china_market',      // ä¸­å›½å¸‚åœºä¸“é¡¹
    'social_analyst',    // ç¤¾äº¤åª’ä½“åˆ†æ
    'manager_momentum',  // åŠ¨èƒ½åˆ†æ
    'risk_system',       // ç³»ç»Ÿé£é™©
    'risk_portfolio',    // ç»„åˆé£é™©
    'interpreter'        // ç™½è¯è§£è¯»
  ]
}
```

### 3.3 ä¾èµ–è‡ªåŠ¨å¤„ç†æœºåˆ¶

```javascript
class AgentDependencyManager {
  // è·å–æ™ºèƒ½ä½“çš„å®Œæ•´ä¾èµ–é“¾
  getFullDependencies(agentId) {
    const deps = new Set()
    const queue = [agentId]
    
    while (queue.length > 0) {
      const current = queue.shift()
      const agent = this.getAgent(current)
      
      if (agent.dependencies) {
        agent.dependencies.forEach(dep => {
          if (!deps.has(dep)) {
            deps.add(dep)
            queue.push(dep)
          }
        })
      }
    }
    
    return Array.from(deps)
  }
  
  // æ™ºèƒ½å¯ç”¨ç­–ç•¥
  smartEnableAgent(agentId) {
    const config = this.loadConfig()
    
    // 1. å¯ç”¨ç›®æ ‡æ™ºèƒ½ä½“
    config.enabled[agentId] = true
    
    // 2. è‡ªåŠ¨å¯ç”¨å¿…éœ€ä¾èµ–
    const deps = this.getFullDependencies(agentId)
    deps.forEach(dep => {
      if (AGENT_PRIORITY_CONFIG.CORE.includes(dep)) {
        config.enabled[dep] = true // æ ¸å¿ƒä¾èµ–å¿…é¡»å¯ç”¨
      }
    })
    
    // 3. æ£€æŸ¥å¹¶è­¦å‘Šå¯é€‰ä¾èµ–
    const optionalDeps = deps.filter(d => 
      AGENT_PRIORITY_CONFIG.OPTIONAL.includes(d) && 
      !config.enabled[d]
    )
    
    if (optionalDeps.length > 0) {
      this.showWarning(
        `æ™ºèƒ½ä½“ ${agentId} ä¾èµ–ä»¥ä¸‹å¯é€‰æ™ºèƒ½ä½“ï¼š${optionalDeps.join(', ')}ã€‚
        å»ºè®®å¯ç”¨ä»¥è·å¾—æœ€ä½³æ•ˆæœã€‚`
      )
    }
    
    return config
  }
  
  // æ™ºèƒ½ç¦ç”¨ç­–ç•¥
  smartDisableAgent(agentId) {
    // æ ¸å¿ƒæ™ºèƒ½ä½“ä¸å…è®¸ç¦ç”¨
    if (AGENT_PRIORITY_CONFIG.CORE.includes(agentId)) {
      throw new Error(`æ ¸å¿ƒæ™ºèƒ½ä½“ ${agentId} ä¸å…è®¸ç¦ç”¨`)
    }
    
    const config = this.loadConfig()
    const dependents = this.findDependents(agentId)
    
    // æ£€æŸ¥æ˜¯å¦æœ‰å¯ç”¨çš„æ™ºèƒ½ä½“ä¾èµ–æ­¤æ™ºèƒ½ä½“
    const activeDependents = dependents.filter(d => config.enabled[d])
    
    if (activeDependents.length > 0) {
      // æä¾›é™çº§æ–¹æ¡ˆ
      return this.proposeGracefulDegradation(agentId, activeDependents)
    }
    
    config.enabled[agentId] = false
    return config
  }
  
  // é™çº§æ–¹æ¡ˆ
  proposeGracefulDegradation(agentId, dependents) {
    const degradations = {
      'china_market': {
        fallback: null,
        message: 'macroå°†ä½¿ç”¨é€šç”¨å¸‚åœºåˆ†æä»£æ›¿ä¸­å›½å¸‚åœºä¸“é¡¹åˆ†æ'
      },
      'social_analyst': {
        fallback: 'news_analyst',
        message: 'industryå°†ä»…ä¾èµ–æ–°é—»åˆ†æï¼Œä¸å«ç¤¾äº¤åª’ä½“æƒ…ç»ª'
      },
      'manager_momentum': {
        fallback: null,
        message: 'é£é™©è¯„ä¼°å°†ç¼ºå°‘åŠ¨èƒ½åˆ†æç»´åº¦'
      },
      'risk_system': {
        fallback: 'risk_portfolio',
        message: 'ç³»ç»Ÿæ€§é£é™©å°†ç”±ç»„åˆé£é™©åˆ†æè¦†ç›–'
      }
    }
    
    return degradations[agentId] || {
      fallback: null,
      message: `ç¦ç”¨${agentId}å¯èƒ½å½±å“${dependents.join(', ')}çš„åˆ†æè´¨é‡`
    }
  }
}
```

### 3.4 å‰ç«¯é…ç½®ç•Œé¢è®¾è®¡

```vue
<template>
  <div class="agent-config-panel">
    <h3>æ™ºèƒ½ä½“å¯ç”¨é…ç½®</h3>
    
    <!-- å¿«é€Ÿé…ç½® -->
    <div class="quick-config">
      <button @click="applyProfile('minimal')">æœ€å°åŒ–é…ç½®</button>
      <button @click="applyProfile('balanced')">å¹³è¡¡é…ç½®</button>
      <button @click="applyProfile('complete')">å®Œæ•´é…ç½®</button>
    </div>
    
    <!-- åˆ†ç»„é…ç½® -->
    <div class="agent-groups">
      <!-- æ ¸å¿ƒæ™ºèƒ½ä½“ï¼ˆä¸å¯ä¿®æ”¹ï¼‰ -->
      <div class="group core">
        <h4>ğŸ”´ æ ¸å¿ƒæ™ºèƒ½ä½“ï¼ˆå¿…éœ€ï¼‰</h4>
        <div v-for="agent in coreAgents" :key="agent.id">
          <label>
            <input type="checkbox" :checked="true" disabled />
            <span>{{ agent.icon }} {{ agent.name }}</span>
            <span class="badge">å¿…éœ€</span>
          </label>
        </div>
      </div>
      
      <!-- é‡è¦æ™ºèƒ½ä½“ -->
      <div class="group important">
        <h4>ğŸŸ¡ é‡è¦æ™ºèƒ½ä½“ï¼ˆæ¨èï¼‰</h4>
        <div v-for="agent in importantAgents" :key="agent.id">
          <label>
            <input 
              type="checkbox" 
              v-model="config.enabled[agent.id]"
              @change="handleToggle(agent.id)"
            />
            <span>{{ agent.icon }} {{ agent.name }}</span>
            <span class="impact" v-if="getImpact(agent.id)">
              å½±å“ï¼š{{ getImpact(agent.id) }}
            </span>
          </label>
        </div>
      </div>
      
      <!-- å¯é€‰æ™ºèƒ½ä½“ -->
      <div class="group optional">
        <h4>ğŸŸ¢ å¯é€‰æ™ºèƒ½ä½“</h4>
        <div v-for="agent in optionalAgents" :key="agent.id">
          <label>
            <input 
              type="checkbox" 
              v-model="config.enabled[agent.id]"
              @change="handleToggle(agent.id)"
            />
            <span>{{ agent.icon }} {{ agent.name }}</span>
            <span class="desc">{{ agent.description }}</span>
          </label>
        </div>
      </div>
    </div>
    
    <!-- å½±å“é¢„è§ˆ -->
    <div class="impact-preview" v-if="pendingChanges.length > 0">
      <h4>é…ç½®å½±å“é¢„è§ˆ</h4>
      <ul>
        <li v-for="change in pendingChanges" :key="change.agent">
          {{ change.message }}
        </li>
      </ul>
    </div>
    
    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <div class="stats">
      <div>å¯ç”¨æ™ºèƒ½ä½“ï¼š{{ enabledCount }}/{{ totalCount }}</div>
      <div>é¢„è®¡åˆ†ææ—¶é—´ï¼š{{ estimatedTime }}ç§’</div>
      <div>APIè°ƒç”¨æˆæœ¬ï¼š{{ estimatedCost }}æ¬¡</div>
    </div>
  </div>
</template>
```

### 3.5 åç«¯APIå®ç°

```python
# backend/api/agent_config_api.py
from typing import Dict, List, Optional
from pydantic import BaseModel

class AgentConfigRequest(BaseModel):
    """æ™ºèƒ½ä½“é…ç½®è¯·æ±‚"""
    enabled: Dict[str, bool]  # æ™ºèƒ½ä½“å¯ç”¨çŠ¶æ€
    profile: Optional[str]     # é…ç½®æ–¹æ¡ˆ

class DependencyCheck(BaseModel):
    """ä¾èµ–æ£€æŸ¥ç»“æœ"""
    agent_id: str
    missing_deps: List[str]
    optional_deps: List[str]
    warnings: List[str]
    can_proceed: bool

@router.post("/api/agents/config/validate")
async def validate_agent_config(request: AgentConfigRequest):
    """éªŒè¯æ™ºèƒ½ä½“é…ç½®çš„åˆæ³•æ€§"""
    
    results = []
    for agent_id, enabled in request.enabled.items():
        if not enabled:
            continue
            
        agent = registry.get_agent(agent_id)
        if not agent:
            continue
            
        check = DependencyCheck(
            agent_id=agent_id,
            missing_deps=[],
            optional_deps=[],
            warnings=[],
            can_proceed=True
        )
        
        # æ£€æŸ¥å¿…éœ€ä¾èµ–
        if agent.dependencies:
            for dep_id in agent.dependencies:
                dep = registry.get_agent(dep_id)
                if not dep:
                    continue
                    
                if dep.id in CORE_AGENTS and not request.enabled.get(dep_id, False):
                    check.missing_deps.append(dep_id)
                    check.can_proceed = False
                elif dep.id in OPTIONAL_AGENTS and not request.enabled.get(dep_id, False):
                    check.optional_deps.append(dep_id)
                    check.warnings.append(
                        f"å»ºè®®å¯ç”¨ {dep.name} ä»¥å¢å¼º {agent.name} çš„åˆ†ææ•ˆæœ"
                    )
        
        results.append(check)
    
    return {
        "valid": all(r.can_proceed for r in results),
        "checks": results
    }

@router.post("/api/agents/config/apply")
async def apply_agent_config(request: AgentConfigRequest):
    """åº”ç”¨æ™ºèƒ½ä½“é…ç½®"""
    
    # ä¿å­˜é…ç½®åˆ°æ•°æ®åº“æˆ–ç¼“å­˜
    config_manager.save_config(request.enabled)
    
    # è®¡ç®—å½±å“
    impact = calculate_config_impact(request.enabled)
    
    return {
        "success": True,
        "enabled_count": sum(1 for v in request.enabled.values() if v),
        "estimated_time": impact["time"],
        "estimated_cost": impact["cost"],
        "quality_score": impact["quality"]
    }

def calculate_config_impact(enabled: Dict[str, bool]) -> Dict:
    """è®¡ç®—é…ç½®çš„å½±å“"""
    
    # åŸºç¡€æ—¶é—´æˆæœ¬
    time_costs = {
        "CORE": 5,      # æ ¸å¿ƒæ™ºèƒ½ä½“å¹³å‡5ç§’
        "IMPORTANT": 3,  # é‡è¦æ™ºèƒ½ä½“å¹³å‡3ç§’
        "OPTIONAL": 2    # å¯é€‰æ™ºèƒ½ä½“å¹³å‡2ç§’
    }
    
    total_time = 0
    total_cost = 0
    quality_score = 100
    
    for agent_id, is_enabled in enabled.items():
        if not is_enabled:
            # ç¦ç”¨æ™ºèƒ½ä½“çš„å½±å“
            if agent_id in IMPORTANT_AGENTS:
                quality_score -= 5  # é‡è¦æ™ºèƒ½ä½“å½±å“5åˆ†
            elif agent_id in OPTIONAL_AGENTS:
                quality_score -= 2  # å¯é€‰æ™ºèƒ½ä½“å½±å“2åˆ†
        else:
            # è®¡ç®—æ—¶é—´å’Œæˆæœ¬
            if agent_id in CORE_AGENTS:
                total_time += time_costs["CORE"]
            elif agent_id in IMPORTANT_AGENTS:
                total_time += time_costs["IMPORTANT"]
            else:
                total_time += time_costs["OPTIONAL"]
            total_cost += 1
    
    return {
        "time": total_time,
        "cost": total_cost,
        "quality": max(0, quality_score)
    }
```

## ğŸ“‹ å››ã€å®æ–½å»ºè®®

### 4.1 åˆ†é˜¶æ®µå®æ–½è®¡åˆ’

**ç¬¬ä¸€é˜¶æ®µï¼ˆ1å‘¨ï¼‰**ï¼š
1. å®ç°åç«¯ä¾èµ–ç®¡ç†ç³»ç»Ÿ
2. æ·»åŠ é…ç½®éªŒè¯API
3. åˆ›å»ºé»˜è®¤é…ç½®æ–¹æ¡ˆ

**ç¬¬äºŒé˜¶æ®µï¼ˆ1å‘¨ï¼‰**ï¼š
1. å¼€å‘å‰ç«¯é…ç½®ç•Œé¢
2. å®ç°ä¾èµ–è­¦å‘Šæç¤º
3. æ·»åŠ å½±å“é¢„è§ˆåŠŸèƒ½

**ç¬¬ä¸‰é˜¶æ®µï¼ˆæµ‹è¯•ä¼˜åŒ–ï¼‰**ï¼š
1. æµ‹è¯•ä¸åŒé…ç½®ç»„åˆ
2. æ”¶é›†æ€§èƒ½æ•°æ®
3. ä¼˜åŒ–é»˜è®¤æ–¹æ¡ˆ

### 4.2 é»˜è®¤é…ç½®æ–¹æ¡ˆ

```javascript
const DEFAULT_PROFILES = {
  // æœ€å°åŒ–é…ç½®ï¼ˆ9ä¸ªæ™ºèƒ½ä½“ï¼Œçº¦45ç§’ï¼‰
  minimal: {
    enabled: {
      news_analyst: true,
      fundamental: true,
      technical: true,
      bull_researcher: true,
      bear_researcher: true,
      research_manager: true,
      risk_manager: true,
      gm: true,
      trader: true
    }
  },
  
  // å¹³è¡¡é…ç½®ï¼ˆ15ä¸ªæ™ºèƒ½ä½“ï¼Œçº¦75ç§’ï¼‰
  balanced: {
    enabled: {
      // åŒ…å«æ‰€æœ‰æ ¸å¿ƒæ™ºèƒ½ä½“
      ...minimal.enabled,
      // æ·»åŠ é‡è¦å¢å¼ºæ™ºèƒ½ä½“
      macro: true,
      industry: true,
      funds: true,
      manager_fundamental: true,
      risk_aggressive: true,
      risk_conservative: true
    }
  },
  
  // å®Œæ•´é…ç½®ï¼ˆ21ä¸ªæ™ºèƒ½ä½“ï¼Œçº¦120ç§’ï¼‰
  complete: {
    enabled: Object.fromEntries(
      AGENTS.map(a => [a.id, true])
    )
  }
}
```

### 4.3 æ³¨æ„äº‹é¡¹

1. **æ ¸å¿ƒæ™ºèƒ½ä½“ä¿æŠ¤**ï¼šç»ä¸å…è®¸ç¦ç”¨æ ¸å¿ƒæ™ºèƒ½ä½“
2. **ä¾èµ–è‡ªåŠ¨å¤„ç†**ï¼šç¦ç”¨æ™ºèƒ½ä½“æ—¶è‡ªåŠ¨æ£€æŸ¥å½±å“
3. **é™çº§æ–¹æ¡ˆæç¤º**ï¼šæä¾›æ¸…æ™°çš„åŠŸèƒ½é™çº§è¯´æ˜
4. **æ€§èƒ½ç›‘æ§**ï¼šè®°å½•ä¸åŒé…ç½®çš„å®é™…è¡¨ç°
5. **ç”¨æˆ·æ•™è‚²**ï¼šé€šè¿‡UIæç¤ºè§£é‡Šå„æ™ºèƒ½ä½“ä½œç”¨

## ğŸ“Š äº”ã€é¢„æœŸæ•ˆæœ

ğŸ”´ æ ¸å¿ƒå¿…éœ€ï¼ˆ9ä¸ªï¼‰ï¼šå¿…é¡»å¯ç”¨ï¼Œæ„æˆæœ€å°å¯ç”¨ç³»ç»Ÿ
ğŸŸ¡ é‡è¦å¢å¼ºï¼ˆ6ä¸ªï¼‰ï¼šé»˜è®¤å¯ç”¨ï¼Œæå‡åˆ†æè´¨é‡
ğŸŸ¢ å¯é€‰è¡¥å……ï¼ˆ6ä¸ªï¼‰ï¼šæŒ‰éœ€å¯ç”¨ï¼Œç‰¹å®šåœºæ™¯å¢å¼º

| é…ç½®æ–¹æ¡ˆ | æ™ºèƒ½ä½“æ•°é‡ | åˆ†ææ—¶é—´ | åˆ†æè´¨é‡ | é€‚ç”¨åœºæ™¯ |
|---------|----------|---------|---------|---------|
| æœ€å°åŒ– | 9ä¸ª | ~45ç§’ | 80% | å¿«é€Ÿå†³ç­– |
| å¹³è¡¡ | 15ä¸ª | ~75ç§’ | 93% | æ—¥å¸¸åˆ†æ |
| å®Œæ•´ | 21ä¸ª | ~120ç§’ | 100% | æ·±åº¦ç ”ç©¶ |
| è‡ªå®šä¹‰ | å¯å˜ | å¯å˜ | å¯å˜ | ç‰¹å®šéœ€æ±‚ |

é€šè¿‡æ™ºèƒ½ä½“å¯é€‰å¯ç”¨åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥ï¼š
- ğŸš€ å‡å°‘30-60%çš„åˆ†ææ—¶é—´
- ğŸ’° é™ä½APIè°ƒç”¨æˆæœ¬
- ğŸ¯ èšç„¦å…³é”®åˆ†æç»´åº¦
- ğŸ”§ æ ¹æ®éœ€æ±‚çµæ´»é…ç½®
