# 文档自动扫描功能说明

> **功能**: 自动扫描 docs 目录，动态加载所有文档  
> **实现日期**: 2025-12-05

---

## 功能概述

文档中心现在支持**自动扫描**功能，无需手动维护文档列表。只要在 `docs/` 目录添加 `.md` 文件，刷新页面即可自动显示。

---

## 工作原理

### 1. 后端自动扫描

**API端点**: `GET /api/documents/list`

```python
# backend/api/documents_api.py
@router.get("/list")
async def list_documents():
    # 扫描docs目录下所有.md文件
    md_files = []
    for file in DOCS_DIR.glob("*.md"):
        if file.is_file():
            md_files.append(file.name)
    
    # 按文件名排序
    md_files.sort()
    
    return {
        "files": md_files,
        "count": len(md_files)
    }
```

### 2. 前端智能分类

**分类规则**:

| 分类名称 | 匹配规则 | 图标 |
|---------|---------|-----|
| 智能体提示词 | 文件名包含 `智能体提示词` | 🤖 |
| 核心逻辑与算法 | 文件名包含 `核心逻辑与算法` | ⚙️ |
| 项目介绍 | 文件名包含 `项目介绍` | 📖 |
| 其他文档 | 不匹配以上任何规则 | 📁 |

### 3. 动态加载内容

**API端点**: `GET /api/documents/read/{filename}`

点击文档时，前端调用此API读取文件内容并渲染。

---

## 使用方法

### 添加新文档

1. **创建文件**: 在 `docs/` 目录创建 `.md` 文件
2. **命名规范**: 
   - 使用中文或英文
   - 扩展名必须是 `.md`
   - 建议使用有意义的文件名

3. **自动分类**:
   - 包含关键词 → 自动归入对应分类
   - 不包含关键词 → 归入"其他文档"

4. **查看文档**: 刷新文档中心页面，新文档自动出现

### 示例

```bash
# 在docs目录创建文件
cd d:\AlphaCouncil\docs

# 智能体相关 → 归入"智能体提示词"
echo "# 新智能体" > 智能体提示词-新智能体说明.md

# 算法相关 → 归入"核心逻辑与算法"
echo "# 新算法" > 核心逻辑与算法-新算法实现.md

# 项目相关 → 归入"项目介绍"
echo "# 新功能" > 项目介绍-新功能说明.md

# 其他文档 → 归入"其他文档"
echo "# 开发日志" > 开发日志.md
echo "# README" > README.md
```

---

## 自定义分类

如果需要添加新的分类规则，修改前端代码：

```javascript
// src/views/DocumentView.vue
const categoryConfig = [
  {
    name: '智能体提示词',
    icon: '🤖',
    pattern: /智能体提示词/,
    defaultIcon: '📰'
  },
  {
    name: '核心逻辑与算法',
    icon: '⚙️',
    pattern: /核心逻辑与算法/,
    defaultIcon: '🔍'
  },
  {
    name: '项目介绍',
    icon: '📖',
    pattern: /项目介绍/,
    defaultIcon: '📄'
  },
  // 添加新分类
  {
    name: '开发文档',
    icon: '💻',
    pattern: /开发|API|接口/,
    defaultIcon: '📝'
  }
]
```

---

## 文件命名建议

### 推荐格式

```
[分类]-[主题]-[子主题].md
```

### 示例

- `项目介绍-技术架构-前端设计.md`
- `智能体提示词-分析师-新闻分析师.md`
- `核心逻辑与算法-过滤算法-语义过滤.md`
- `开发日志-2025-12-05.md`

### 优势

1. **清晰分类**: 一眼看出文档类型
2. **易于搜索**: 按关键词快速定位
3. **自动归类**: 符合分类规则自动归入
4. **便于管理**: 文件名即文档结构

---

## 技术特点

### 1. 零配置
- ✅ 无需修改代码
- ✅ 无需维护列表
- ✅ 添加即生效

### 2. 实时扫描
- ✅ 每次打开都扫描
- ✅ 确保最新状态
- ✅ 支持热更新

### 3. 智能分类
- ✅ 自动识别类型
- ✅ 未知文档归入"其他"
- ✅ 支持自定义规则

### 4. 安全可靠
- ✅ 路径验证
- ✅ 防止目录遍历
- ✅ 只读取.md文件

---

## 注意事项

### 1. 文件格式
- ⚠️ 只支持 `.md` 文件
- ⚠️ 其他格式会被忽略

### 2. 文件名
- ⚠️ 避免特殊字符
- ⚠️ 建议使用中文或英文
- ⚠️ 不要使用 `..` 等路径符号

### 3. 文件大小
- ⚠️ 建议单个文件 < 1MB
- ⚠️ 过大文件可能加载慢

### 4. 刷新机制
- ⚠️ 需要刷新页面才能看到新文档
- ⚠️ 不支持实时监听（可后续添加）

---

## 后续优化方向

### 短期
- [ ] 添加文档搜索功能
- [ ] 支持文档排序（按时间/名称）
- [ ] 添加文档标签系统

### 中期
- [ ] 支持子目录扫描
- [ ] 支持文档预览
- [ ] 添加文档收藏功能

### 长期
- [ ] 实时文件监听（WebSocket）
- [ ] 支持在线编辑
- [ ] 版本历史管理

---

## 常见问题

### Q: 新文档不显示？
**A**: 刷新页面（Ctrl + F5）

### Q: 文档显示乱码？
**A**: 确保文件编码为 UTF-8

### Q: 想修改分类规则？
**A**: 编辑 `DocumentView.vue` 中的 `categoryConfig`

### Q: 如何删除文档？
**A**: 直接删除 `docs/` 目录下的文件，刷新即可

---

## 总结

文档自动扫描功能让文档管理变得简单高效：
- 📝 **添加文档**: 创建文件即可
- 🔄 **自动更新**: 刷新页面即可
- 📁 **智能分类**: 自动识别归类
- 🚀 **零配置**: 无需修改代码

现在你可以专注于编写文档内容，系统会自动处理其他一切！🎉
