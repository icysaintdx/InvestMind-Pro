# ç³»ç»ŸçŠ¶æ€ä¿®å¤æŠ¥å‘Š

**ä¿®å¤æ—¥æœŸ**: 2024-12-04 17:52  
**ç‰ˆæœ¬**: v1.6.0

## ğŸ” å‘ç°çš„é—®é¢˜

1. **ç«¯å£8000è¢«å ç”¨** - å¯¼è‡´åç«¯æ— æ³•å¯åŠ¨
2. **å‰ç«¯è¿è¡Œæ—¶é”™è¯¯** - `change.startsWith is not a function`
3. **APIé…ç½®çŠ¶æ€æ˜¾ç¤ºé”™è¯¯** - æ˜¾ç¤º"æœªé…ç½®"ä½†å®é™…å·²é…ç½®
4. **è¿æ¥çŠ¶æ€ç›‘æ§å¤±æ•ˆ** - æ‰€æœ‰çŠ¶æ€æŒ‡ç¤ºç¯éƒ½æ˜¯ç°è‰²

## âœ… ä¿®å¤æ–¹æ¡ˆ

### 1. ç«¯å£å ç”¨é—®é¢˜

åˆ›å»ºäº†ç«¯å£é‡Šæ”¾è„šæœ¬ï¼š
- `KILL_PORT_8000.bat` - é‡Šæ”¾8000ç«¯å£
- `FULL_RESTART.bat` - å®Œæ•´é‡å¯å‰åç«¯

### 2. å‰ç«¯é”™è¯¯ä¿®å¤

**æ–‡ä»¶**: `alpha-council-vue/src/components/StockDataPanel.vue`

**é—®é¢˜åŸå› **: `change`å­—æ®µæ˜¯æ•°å­—ç±»å‹ï¼Œä½†ä»£ç å°è¯•è°ƒç”¨å­—ç¬¦ä¸²æ–¹æ³•`startsWith()`

**è§£å†³æ–¹æ¡ˆ**:
```javascript
// ä¿®æ”¹å‰
const getChangeClass = (change) => {
  if (!change) return ''
  return change.startsWith('+') ? 'positive' : 'negative'
}

// ä¿®æ”¹å
const getChangeClass = (change) => {
  if (!change && change !== 0) return ''
  const changeNum = parseFloat(String(change))
  return changeNum >= 0 ? 'positive' : 'negative'
}

// æ–°å¢æ ¼å¼åŒ–å‡½æ•°
const formatChange = (change) => {
  if (!change && change !== 0) return '0.00%'
  const changeNum = parseFloat(change)
  return (changeNum >= 0 ? '+' : '') + changeNum.toFixed(2) + '%'
}
```

### 3. APIé…ç½®çŠ¶æ€ä¿®å¤

**æ–‡ä»¶**: `alpha-council-vue/src/App.vue`

**ä¿®æ”¹å†…å®¹**:
- æ·»åŠ è°ƒè¯•æ—¥å¿—
- æ­£ç¡®å¤„ç†API Keyæ˜¾ç¤ºï¼ˆåªæ˜¾ç¤ºå‰20ä¸ªå­—ç¬¦ï¼‰
- æ˜ç¡®è®¾ç½®æœªé…ç½®çŠ¶æ€

```javascript
if (data.api_keys[provider]) {
  apiKeys.value[provider] = data.api_keys[provider].substring(0, 20) + '...'
  apiStatus.value[provider] = 'configured'
  console.log(`[App] âœ… ${provider} APIå·²é…ç½®`)
} else {
  apiStatus.value[provider] = 'not_configured'
  console.log(`[App] âš ï¸ ${provider} APIæœªé…ç½®`)
}
```

### 4. åç«¯æœåŠ¡ä¿®å¤

**æ–‡ä»¶**: `backend/server.py`

**æ·»åŠ çš„å¯¼å…¥**:
```python
from fastapi.staticfiles import StaticFiles
from fastapi.responses import FileResponse
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å®Œæ•´é‡å¯ç³»ç»Ÿ

è¿è¡Œæ‰¹å¤„ç†æ–‡ä»¶ï¼š
```bash
FULL_RESTART.bat
```

è¿™å°†ï¼š
1. é‡Šæ”¾ç«¯å£ 8000 å’Œ 8080
2. å¯åŠ¨åç«¯æœåŠ¡å™¨
3. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨

### æ‰‹åŠ¨æ­¥éª¤

```bash
# 1. é‡Šæ”¾ç«¯å£
KILL_PORT_8000.bat

# 2. å¯åŠ¨åç«¯
python backend\server.py

# 3. å¯åŠ¨å‰ç«¯
cd alpha-council-vue
npm run serve
```

## ğŸ“Š éªŒè¯æ£€æŸ¥

å¯åŠ¨åæ£€æŸ¥ï¼š

1. **åç«¯çŠ¶æ€**: è®¿é—® http://localhost:8000/docs
2. **å‰ç«¯ç•Œé¢**: è®¿é—® http://localhost:8080
3. **APIé…ç½®**: æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼Œåº”æ˜¾ç¤ºï¼š
   ```
   [App] âœ… gemini APIå·²é…ç½®
   [App] âœ… deepseek APIå·²é…ç½®
   [App] âœ… qwen APIå·²é…ç½®
   [App] âœ… siliconflow APIå·²é…ç½®
   ```
4. **è¿æ¥æŒ‡ç¤ºç¯**: åº”æ˜¾ç¤ºä¸ºç»¿è‰²ï¼ˆå·²è¿æ¥ï¼‰
5. **è‚¡ç¥¨æ•°æ®é¢æ¿**: æ¶¨è·Œå¹…åº”æ­£ç¡®æ˜¾ç¤ºï¼ˆå¦‚ +1.50%ï¼‰

## ğŸ”§ å…³é”®æ–‡ä»¶

- `FULL_RESTART.bat` - å®Œæ•´é‡å¯è„šæœ¬
- `alpha-council-vue/src/components/StockDataPanel.vue` - ä¿®å¤æ¶¨è·Œå¹…æ˜¾ç¤º
- `alpha-council-vue/src/App.vue` - ä¿®å¤APIçŠ¶æ€æ£€æµ‹
- `backend/server.py` - æ·»åŠ ç¼ºå¤±çš„å¯¼å…¥

## âœ¨ æ”¹è¿›æ•ˆæœ

- âœ… æ¶ˆé™¤æ‰€æœ‰è¿è¡Œæ—¶é”™è¯¯
- âœ… APIé…ç½®çŠ¶æ€æ­£ç¡®æ˜¾ç¤º
- âœ… è¿æ¥ç›‘æ§æ­£å¸¸å·¥ä½œ
- âœ… æ¶¨è·Œå¹…æ ¼å¼åŒ–æ˜¾ç¤º
- âœ… ç«¯å£ç®¡ç†æ›´æ–¹ä¾¿

## ğŸ“ æ³¨æ„äº‹é¡¹

1. å¦‚æœç«¯å£è¢«å ç”¨ï¼Œä½¿ç”¨ `FULL_RESTART.bat` è‡ªåŠ¨é‡Šæ”¾
2. API Keyåœ¨å‰ç«¯åªæ˜¾ç¤ºéƒ¨åˆ†å†…å®¹ï¼Œä¿è¯å®‰å…¨æ€§
3. æ‰€æœ‰çŠ¶æ€å˜åŒ–éƒ½æœ‰æ§åˆ¶å°æ—¥å¿—ï¼Œæ–¹ä¾¿è°ƒè¯•
