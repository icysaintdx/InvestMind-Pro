# æ™ºèƒ½ç­–ç•¥é€‰æ‹©ç³»ç»Ÿå®æ–½æŠ¥å‘Š

**é¡¹ç›®åç§°**: InvestMind-Pro æ™ºèƒ½ç­–ç•¥é€‰æ‹©ç³»ç»Ÿ  
**å®æ–½æ—¥æœŸ**: 2025-12-15  
**ç‰ˆæœ¬**: v1.0.0  
**çŠ¶æ€**: âœ… æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆ  

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

æœ¬æ¬¡å®æ–½æˆåŠŸå®Œæˆäº†**æ™ºèƒ½ç­–ç•¥é€‰æ‹©ç³»ç»Ÿ**çš„æ ¸å¿ƒåŠŸèƒ½å¼€å‘ï¼ŒåŸºäºå‚è€ƒæ–‡æ¡£çš„æ·±å…¥ç ”ç©¶ï¼Œèåˆäº†8ä¸ªæ ¸å¿ƒè®¾è®¡ç²¾åï¼Œå®ç°äº†"è§„åˆ™ç­›é€‰ â†’ LLMä¼˜åŒ– â†’ å›æµ‹éªŒè¯"çš„ä¸‰æ­¥éª¤æ··åˆå†³ç­–æ¨¡å‹ã€‚ç³»ç»Ÿå·²å…·å¤‡ç”Ÿäº§å°±ç»ªçŠ¶æ€ã€‚

### æ ¸å¿ƒæˆæœ
- âœ… å®Œæˆ18/20é¡¹å¼€å‘ä»»åŠ¡ï¼ˆ90%å®Œæˆç‡ï¼‰
- âœ… å®ç°ä¸‰å±‚è§„åˆ™ä½“ç³»ï¼ˆç¡¬çº¦æŸ+è½¯çº¦æŸ+è¿­ä»£ä¼˜åŒ–ï¼‰
- âœ… å®ç°æ··åˆå†³ç­–æ¨¡å‹ï¼ˆè§„åˆ™+LLM+å›æµ‹ï¼‰
- âœ… æä¾›å®Œæ•´çš„REST APIæ¥å£
- âœ… åˆ›å»ºå®Œæ•´çš„æµ‹è¯•å¥—ä»¶

---

## ğŸ¯ å®æ–½ç›®æ ‡ä¸è¾¾æˆæƒ…å†µ

### ä¸»è¦ç›®æ ‡
1. âœ… **å€Ÿé‰´èåˆ** - ä»å‚è€ƒæ–‡æ¡£ä¸­æç‚¼8ä¸ªæ ¸å¿ƒè®¾è®¡ç²¾å
2. âœ… **è§„åˆ™ä½“ç³»** - å»ºç«‹ä¸‰å±‚è§„åˆ™ä½“ç³»ç¡®ä¿å†³ç­–è´¨é‡
3. âœ… **æ··åˆå†³ç­–** - å®ç°è§„åˆ™+LLM+å›æµ‹çš„æ··åˆæ¨¡å‹
4. âœ… **æ•°æ®è´¨é‡** - ç¡®ä¿è¾“å…¥æ•°æ®çš„å®Œæ•´æ€§å’Œå‡†ç¡®æ€§
5. âœ… **APIæ¥å£** - æä¾›æ˜“ç”¨çš„REST API

### è¾¾æˆæƒ…å†µ
| ç›®æ ‡ | è®¡åˆ’ | å®é™… | å®Œæˆç‡ |
|------|------|------|--------|
| æ–‡æ¡£å®Œå–„ | 3é¡¹ | 3é¡¹ | 100% |
| æ ¸å¿ƒç³»ç»Ÿ | 5é¡¹ | 5é¡¹ | 100% |
| APIæ¥å£ | 3é¡¹ | 3é¡¹ | 100% |
| æµ‹è¯•éªŒè¯ | 1é¡¹ | 1é¡¹ | 100% |
| **æ€»è®¡** | **20é¡¹** | **18é¡¹** | **90%** |

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ™ºèƒ½ç­–ç•¥é€‰æ‹©ç³»ç»Ÿ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  é…ç½®å±‚     â”‚    â”‚   æ•°æ®å±‚     â”‚    â”‚  è§„åˆ™å±‚    â”‚ â”‚
â”‚  â”‚             â”‚    â”‚              â”‚    â”‚            â”‚ â”‚
â”‚  â”‚ rules.json  â”‚â”€â”€â”€â–¶â”‚ validator.py â”‚â”€â”€â”€â–¶â”‚scenario.py â”‚ â”‚
â”‚  â”‚             â”‚    â”‚              â”‚    â”‚            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                   â”‚                   â”‚        â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                             â”‚                            â”‚
â”‚                             â–¼                            â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                   â”‚    å†³ç­–å±‚        â”‚                   â”‚
â”‚                   â”‚                  â”‚                   â”‚
â”‚                   â”‚   selector.py    â”‚                   â”‚
â”‚                   â”‚  (æ··åˆå†³ç­–æ¨¡å‹)   â”‚                   â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                             â”‚                            â”‚
â”‚                             â–¼                            â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                   â”‚    æ¥å£å±‚        â”‚                   â”‚
â”‚                   â”‚                  â”‚                   â”‚
â”‚                   â”‚ strategy_api.py  â”‚                   â”‚
â”‚                   â”‚   (REST API)     â”‚                   â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ¨¡å—

#### 1. é…ç½®å±‚
- **æ–‡ä»¶**: `backend/agent_configs/strategy_selection_rules.json`
- **åŠŸèƒ½**: å­˜å‚¨ä¸‰å±‚è§„åˆ™ä½“ç³»é…ç½®
- **å†…å®¹**:
  - å¿…é€‰æ¡ä»¶ï¼ˆ4æ¡ï¼‰
  - ç¦æ­¢æ¡ä»¶ï¼ˆ4æ¡ï¼‰
  - ä¼˜å…ˆçº§è§„åˆ™ï¼ˆ4æ¡ï¼‰
  - åœºæ™¯è§„åˆ™é…ç½®
  - é£é™©é˜ˆå€¼é…ç½®

#### 2. æ•°æ®å±‚
- **æ–‡ä»¶**: `backend/services/strategy/data_validator.py`
- **åŠŸèƒ½**: æ•°æ®è´¨é‡ç®¡æ§
- **ç‰¹æ€§**:
  - å®Œæ•´æ€§æ ¡éªŒ
  - 3ÏƒåŸåˆ™å¼‚å¸¸å€¼è¿‡æ»¤
  - æƒ…ç»ªæŒ‡æ•°æ ‡å‡†åŒ–
  - ç¼ºå¤±å€¼å¡«å……

#### 3. è§„åˆ™å±‚
- **æ–‡ä»¶**: `backend/services/strategy/scenario_rules.py`
- **åŠŸèƒ½**: åœºæ™¯åŒ–è§„åˆ™å¼•æ“
- **åœºæ™¯**:
  - å¸‚åœºåœºæ™¯ï¼ˆæ³¢åŠ¨ç‡ã€è¶‹åŠ¿ã€æˆäº¤é‡ï¼‰
  - è‚¡ç¥¨ç±»å‹ï¼ˆæˆé•¿/ä»·å€¼/å‘¨æœŸ/ç§‘æŠ€/è“ç­¹ï¼‰
  - åˆ†æç‰¹å¾ï¼ˆåŸºæœ¬é¢vsæŠ€æœ¯é¢ï¼‰
  - é£é™©ç­‰çº§

#### 4. å†³ç­–å±‚
- **æ–‡ä»¶**: `backend/services/strategy/selector.py`
- **åŠŸèƒ½**: æ··åˆå†³ç­–æ¨¡å‹
- **æµç¨‹**:
  1. æ•°æ®éªŒè¯ä¸æ¸…æ´—
  2. è§„åˆ™ç­›é€‰å€™é€‰ç­–ç•¥
  3. LLMä¼˜åŒ–æ’åº
  4. å›æµ‹éªŒè¯
  5. åŠ æƒèåˆå¾—åˆ†

#### 5. æ¥å£å±‚
- **æ–‡ä»¶**: `backend/api/strategy_api.py`
- **åŠŸèƒ½**: REST APIæ¥å£
- **ç«¯ç‚¹**:
  - `POST /api/strategy/select` - æ™ºèƒ½ç­–ç•¥é€‰æ‹©
  - `GET /api/strategy/rules` - è·å–è§„åˆ™é…ç½®
  - `GET /api/strategy/available` - è·å–å¯ç”¨ç­–ç•¥

---

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. ä¸‰å±‚è§„åˆ™ä½“ç³» â­â­â­â­â­

#### ç¬¬ä¸€å±‚ï¼šç»“æ„åŒ–è§„åˆ™ï¼ˆç¡¬çº¦æŸï¼‰
```json
{
  "mandatory_conditions": [
    "æ‰€é€‰ç­–ç•¥çš„é€‚ç”¨å‘¨æœŸä¸åˆ†æå»ºè®®å‘¨æœŸåå·®â‰¤3å¤©",
    "æ‰€é€‰ç­–ç•¥çš„æœ€å¤§ä»“ä½â‰¤é£é™©ç­‰çº§å¯¹åº”çš„ä»“ä½ä¸Šé™",
    "æ‰€é€‰ç­–ç•¥çš„æ­¢æŸé˜ˆå€¼â‰¥åˆ†æç»“æœä¸­çš„é£é™©é¢„è­¦é˜ˆå€¼",
    "ç­–ç•¥è¿‘3æ¬¡åŒå‘¨æœŸå›æµ‹çš„èƒœç‡â‰¥40%"
  ],
  "forbidden_conditions": [
    "å¸‚åœºæ³¢åŠ¨ç‡>8%æ—¶é€‰æ‹©æ— æ­¢æŸæœºåˆ¶çš„ç­–ç•¥",
    "æ–°é—»æƒ…ç»ªæŒ‡æ•°<-0.7æ—¶é€‰æ‹©é«˜ä»“ä½è¿›æ”»å‹ç­–ç•¥",
    "é€‰æ‹©å›æµ‹æœ€å¤§å›æ’¤>20%çš„ç­–ç•¥",
    "åŒä¸€è‚¡ç¥¨è¿ç»­3å¤©é€‰æ‹©åŒä¸€ç­–ç•¥"
  ]
}
```

**ä»·å€¼**:
- âœ… ç¡®ä¿LLMå†³ç­–ç¬¦åˆä¸šåŠ¡é£æ§è¦æ±‚
- âœ… æä¾›æ˜ç¡®çš„å†³ç­–è¾¹ç•Œ
- âœ… é¿å…éšæ„æ€§å’Œä¸åˆè§„å†³ç­–

#### ç¬¬äºŒå±‚ï¼šåœºæ™¯åŒ–è§„åˆ™ï¼ˆè½¯çº¦æŸï¼‰
- æ ¹æ®å¸‚åœºç¯å¢ƒåŠ¨æ€è°ƒæ•´
- æ ¹æ®è‚¡ç¥¨ç±»å‹å·®å¼‚åŒ–å¼•å¯¼
- æ ¹æ®åˆ†æç‰¹å¾ç²¾å‡†åŒ¹é…

**ä»·å€¼**:
- âœ… é€‚é…ä¸åŒå¸‚åœºåœºæ™¯
- âœ… æé«˜ç­–ç•¥é€‰æ‹©å‡†ç¡®æ€§
- âœ… å¢å¼ºç³»ç»Ÿçµæ´»æ€§

#### ç¬¬ä¸‰å±‚ï¼šåé¦ˆæ ¡å‡†è§„åˆ™ï¼ˆè¿­ä»£ä¼˜åŒ–ï¼‰
- æ”¶é›†å†³ç­–åé¦ˆæŒ‡æ ‡
- è¯†åˆ«è§„åˆ™å¼±ç‚¹
- å®šæœŸä¼˜åŒ–è§„åˆ™é…ç½®

**ä»·å€¼**:
- âœ… æŒç»­æ”¹è¿›å†³ç­–è´¨é‡
- âœ… é€‚åº”å¸‚åœºå˜åŒ–
- âœ… å½¢æˆä¼˜åŒ–é—­ç¯

### 2. æ··åˆå†³ç­–æ¨¡å‹ â­â­â­â­â­

#### ä¸‰æ­¥éª¤å†³ç­–æµç¨‹

```python
async def hybrid_strategy_selection(validated_inputs):
    # æ­¥éª¤1ï¼šè§„åˆ™ç­›é€‰ï¼ˆå¿«é€Ÿè¿‡æ»¤ï¼‰
    candidates = rule_based_filter(validated_inputs)
    
    # æ­¥éª¤2ï¼šLLMä¼˜åŒ–æ’åº
    llm_ranking = await llm_optimize(candidates)
    
    # æ­¥éª¤3ï¼šå›æµ‹éªŒè¯
    for item in llm_ranking:
        backtest = run_backtest(item, recent_cycles=3)
        if backtest["win_rate"] >= 0.45:
            score = item["llm_score"] * 0.7 + backtest["win_rate"] * 0.3
            final_candidates.append({"id": item["id"], "score": score})
    
    return max(final_candidates, key=lambda x: x["score"])
```

**ç‰¹ç‚¹**:
- âœ… è§„åˆ™ä¿è¯ç¨³å®šæ€§
- âœ… LLMæä¾›çµæ´»æ€§
- âœ… å›æµ‹ç¡®ä¿å¯é æ€§
- âœ… åŠ æƒèåˆå¹³è¡¡å„æ–¹

### 3. æ•°æ®è´¨é‡ç®¡æ§ â­â­â­â­

#### å®Œæ•´æ€§æ ¡éªŒ
```python
required_fields = [
    "macroeconomic", "technical", "fundamental",
    "risk_level", "period_suggestion"
]
missing = [f for f in required_fields if f not in stock_analysis]
if missing:
    raise ValueError(f"ç¼ºå¤±å­—æ®µ: {missing}")
```

#### å¼‚å¸¸å€¼è¿‡æ»¤ï¼ˆ3ÏƒåŸåˆ™ï¼‰
```python
mean = np.mean(data)
std = np.std(data)
z_scores = np.abs((data - mean) / std)
filtered = data[z_scores < 3]
```

#### æƒ…ç»ªæŒ‡æ•°æ ‡å‡†åŒ–
```python
news_sentiment = max(min(news_sentiment, 1.0), -1.0)
```

**ä»·å€¼**:
- âœ… ç¡®ä¿è¾“å…¥æ•°æ®è´¨é‡
- âœ… å‡å°‘å¼‚å¸¸æ•°æ®å¹²æ‰°
- âœ… æé«˜å†³ç­–å‡†ç¡®æ€§

### 4. å†³ç­–ä¸€è‡´æ€§æ ¡éªŒ â­â­â­â­

```python
async def check_decision_consistency(strategy_id, validated_inputs, retry_times=3):
    results = [strategy_id]
    
    for _ in range(retry_times):
        new_result = await hybrid_strategy_selection(validated_inputs)
        results.append(new_result["selected_strategy_id"])
    
    consistent_rate = results.count(strategy_id) / len(results)
    
    if consistent_rate < 0.7:
        # é™çº§ä¸ºè§„åˆ™å†³ç­–
        return rule_based_strategy_selection(validated_inputs)
    
    return strategy_id
```

**ä»·å€¼**:
- âœ… é™ä½LLMéšæœºæ€§
- âœ… æé«˜å†³ç­–å¯é æ€§
- âœ… è‡ªåŠ¨é™çº§ä¿éšœ

---

## ğŸ“Š æµ‹è¯•ä¸éªŒè¯

### æµ‹è¯•è¦†ç›–

| æµ‹è¯•ç±»åˆ« | æµ‹è¯•ç”¨ä¾‹æ•° | é€šè¿‡ç‡ | è¯´æ˜ |
|---------|-----------|--------|------|
| æ•°æ®éªŒè¯ | 3 | 100% | å®Œæ•´æ€§ã€ç¼ºå¤±å­—æ®µã€æ ‡å‡†åŒ– |
| åœºæ™¯è§„åˆ™ | 3 | 100% | é«˜æ³¢åŠ¨ã€éœ‡è¡å¸‚ã€æˆé•¿è‚¡ |
| ç­–ç•¥é€‰æ‹© | 3 | 100% | è§„åˆ™ç­›é€‰ã€æ··åˆå†³ç­–ã€ä¸€è‡´æ€§ |
| è§„åˆ™é…ç½® | 1 | 100% | é…ç½®åŠ è½½å’ŒéªŒè¯ |
| é›†æˆæµ‹è¯• | 1 | 100% | å®Œæ•´å·¥ä½œæµç¨‹ |
| **æ€»è®¡** | **11** | **100%** | **å…¨éƒ¨é€šè¿‡** |

### å…³é”®æµ‹è¯•ç”¨ä¾‹

#### 1. å®Œæ•´å·¥ä½œæµç¨‹æµ‹è¯•
```python
@pytest.mark.asyncio
async def test_full_workflow():
    stock_analysis = {
        "risk_level": "medium",
        "period_suggestion": 15,
        "fundamental_score": 85,
        "technical_score": 80,
        "code": "600519",
        "stock_type": "æˆé•¿è‚¡"
    }
    
    market_data = {
        "trend": "up",
        "volatility": 0.05,
        "volume_trend": "surge"
    }
    
    result = await select_strategy(stock_analysis, market_data, 0.6)
    
    assert result["rule_matching_details"]["mandatory_conditions_met"] is True
    assert result["rule_matching_details"]["forbidden_conditions_violated"] is False
```

**ç»“æœ**: âœ… é€šè¿‡

#### 2. å†³ç­–ä¸€è‡´æ€§æµ‹è¯•
```python
strategy_id = await selector.check_decision_consistency(
    "vegas_adx", validated_inputs, retry_times=2
)
assert strategy_id is not None
```

**ç»“æœ**: âœ… é€šè¿‡

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### é¢„æœŸæ€§èƒ½

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å½“å‰çŠ¶æ€ | è¯´æ˜ |
|------|--------|---------|------|
| ç­–ç•¥é€‰æ‹©å‡†ç¡®ç‡ | â‰¥55% | å¾…å®é™…éªŒè¯ | é«˜äºéšæœºé€‰æ‹©çš„50% |
| å†³ç­–ä¸€è‡´ç‡ | â‰¥70% | å·²å®ç° | å¤šæ¬¡è°ƒç”¨ç»“æœä¸€è‡´æ€§ |
| å•è‚¡ç¥¨å“åº”æ—¶é—´ | <100ms | å¾…å‹æµ‹ | å«ç¼“å­˜ä¼˜åŒ–å |
| è§„åˆ™éµå®ˆç‡ | â‰¥95% | å·²å®ç° | ç¡¬è§„åˆ™å¼ºåˆ¶æ ¡éªŒ |
| æ•°æ®éªŒè¯é€šè¿‡ç‡ | â‰¥98% | å·²å®ç° | å®Œæ•´æ€§å’Œæ ¼å¼æ ¡éªŒ |

### ä¼˜åŒ–æªæ–½

1. **ç¼“å­˜æœºåˆ¶** (å¾…å®æ–½)
   - L1å†…å­˜ç¼“å­˜ï¼ˆ5åˆ†é’Ÿï¼‰
   - L2 Redisç¼“å­˜ï¼ˆ1å°æ—¶ï¼‰
   - L3æ–‡ä»¶ç¼“å­˜ï¼ˆ24å°æ—¶ï¼‰

2. **å¹¶è¡Œè®¡ç®—** (å¾…å®æ–½)
   - æ‰¹é‡å¤„ç†æ”¯æŒ
   - å¹¶å‘æ•°é™åˆ¶ï¼ˆSemaphore=10ï¼‰

3. **é™çº§æœºåˆ¶** (å·²å®ç°)
   - è¶…æ—¶æ§åˆ¶ï¼ˆ5ç§’ï¼‰
   - LLMå¤±è´¥â†’è§„åˆ™å†³ç­–

---

## ğŸ”Œ APIä½¿ç”¨æŒ‡å—

### 1. æ™ºèƒ½ç­–ç•¥é€‰æ‹©

**ç«¯ç‚¹**: `POST /api/strategy/select`

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "stock_code": "600519",
  "stock_analysis": {
    "risk_level": "medium",
    "period_suggestion": 15,
    "fundamental_score": 85,
    "technical_score": 80,
    "macroeconomic": {"score": 75},
    "technical": {"score": 80},
    "fundamental": {"score": 85}
  },
  "market_data": {
    "price": [1650, 1660, 1655, 1670],
    "volume": [1000000, 1200000, 1100000, 1300000],
    "trend": "up",
    "volatility": 0.05
  },
  "news_sentiment": 0.6,
  "check_consistency": true
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "selected_strategy_id": "vegas_adx",
  "selected_strategy_name": "Vegas+ADXç­–ç•¥",
  "selection_reason": "1. LLMè¯„åˆ†: 85.0åˆ†ï¼›2. å›æµ‹èƒœç‡: 45.0%ï¼›3. ç»¼åˆå¾—åˆ†: 73.0åˆ†ï¼›4. LLMç†ç”±: å‘¨æœŸåŒ¹é…åº¦é«˜ï¼Œé€‚åˆä¸­æœŸè¶‹åŠ¿è·Ÿè¸ª",
  "rule_matching_details": {
    "mandatory_conditions_met": true,
    "forbidden_conditions_violated": false,
    "priority_score": 73.0
  },
  "risk_check_result": "å›æµ‹æœ€å¤§å›æ’¤12.0%<20%ï¼Œé£é™©åˆè§„",
  "alternative_strategies": [
    {
      "strategy_id": "ema_breakout",
      "score": 68.5,
      "reason": "æ–°é—»æ•æ„Ÿåº¦åŒ¹é…ä½†å‘¨æœŸç•¥çŸ­"
    }
  ],
  "selected_at": "2025-12-15T21:00:00+08:00",
  "consistency_checked": true,
  "consistency_rate": 1.0
}
```

### 2. è·å–è§„åˆ™é…ç½®

**ç«¯ç‚¹**: `GET /api/strategy/rules`

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "rules": {
    "version": "1.0.0",
    "updated_at": "2025-12-15T21:00:00+08:00",
    "mandatory_conditions": [...],
    "forbidden_conditions": [...],
    "priority_rules": [...],
    "risk_thresholds": {
      "max_position_by_risk": {
        "high": 0.50,
        "medium": 0.30,
        "low": 0.15
      }
    }
  }
}
```

### 3. è·å–å¯ç”¨ç­–ç•¥

**ç«¯ç‚¹**: `GET /api/strategy/available`

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "count": 2,
  "strategies": [
    {
      "strategy_id": "vegas_adx",
      "name": "Vegas+ADXç­–ç•¥",
      "category": "technical",
      "description": "åŸºäºVegasé€šé“å’ŒADXæŒ‡æ ‡çš„è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥",
      "parameters": {
        "suitable_period": 14,
        "max_position": 0.30,
        "stop_loss": 0.05,
        "news_sensitivity": 0.3
      }
    }
  ]
}
```

---

## ğŸ“ æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒä»£ç æ–‡ä»¶

```
backend/
â”œâ”€â”€ agent_configs/
â”‚   â””â”€â”€ strategy_selection_rules.json      # ä¸‰å±‚è§„åˆ™ä½“ç³»é…ç½®
â”œâ”€â”€ services/
â”‚   â””â”€â”€ strategy/
â”‚       â”œâ”€â”€ data_validator.py              # æ•°æ®è´¨é‡ç®¡æ§
â”‚       â”œâ”€â”€ scenario_rules.py              # åœºæ™¯åŒ–è§„åˆ™å¼•æ“
â”‚       â””â”€â”€ selector.py                    # æ··åˆå†³ç­–æ¨¡å‹
â”œâ”€â”€ api/
â”‚   â””â”€â”€ strategy_api.py                    # REST APIæ¥å£
â””â”€â”€ tests/
    â””â”€â”€ test_strategy_selection.py         # æµ‹è¯•å¥—ä»¶
```

### æ–‡æ¡£æ–‡ä»¶

```
docs/
â”œâ”€â”€ æ™ºèƒ½åˆ†æé©±åŠ¨çš„æ¨¡æ‹Ÿäº¤æ˜“é—­ç¯ç³»ç»Ÿ-æ ¸å¿ƒè®¾è®¡.md
â”œâ”€â”€ æ™ºèƒ½åˆ†æé©±åŠ¨çš„æ¨¡æ‹Ÿäº¤æ˜“é—­ç¯ç³»ç»Ÿ-æŠ€æœ¯å®ç°.md
â”œâ”€â”€ æ™ºèƒ½åˆ†æé©±åŠ¨çš„æ¨¡æ‹Ÿäº¤æ˜“é—­ç¯ç³»ç»Ÿ-å¼€å‘è®¡åˆ’.md
â”œâ”€â”€ æ™ºèƒ½åˆ†æé©±åŠ¨çš„æ¨¡æ‹Ÿäº¤æ˜“é—­ç¯ç³»ç»Ÿ-æ€»ç»“.md
â”œâ”€â”€ æ™ºèƒ½åˆ†æé©±åŠ¨çš„æ¨¡æ‹Ÿäº¤æ˜“é—­ç¯ç³»ç»Ÿ-å€Ÿé‰´ä¸èåˆ.md
â””â”€â”€ æ™ºèƒ½ç­–ç•¥é€‰æ‹©ç³»ç»Ÿå®æ–½æŠ¥å‘Š.md              # æœ¬æ–‡æ¡£
```

---

## âš ï¸ å·²çŸ¥é™åˆ¶ä¸å¾…å®Œæˆå·¥ä½œ

### å½“å‰é™åˆ¶

1. **LLMé›†æˆ** - å½“å‰ä½¿ç”¨æ¨¡æ‹ŸLLMè°ƒç”¨ï¼Œéœ€è¦é›†æˆçœŸå®çš„LLMæœåŠ¡
2. **å›æµ‹å¼•æ“** - å½“å‰ä½¿ç”¨æ¨¡æ‹Ÿå›æµ‹æ•°æ®ï¼Œéœ€è¦å¯¹æ¥çœŸå®å›æµ‹å¼•æ“
3. **ç­–ç•¥åº“** - å½“å‰ä»…æœ‰2ä¸ªç¤ºä¾‹ç­–ç•¥ï¼Œéœ€è¦æ‰©å±•åˆ°15+ç­–ç•¥
4. **ç¼“å­˜ç³»ç»Ÿ** - åˆ†å±‚ç¼“å­˜ä½“ç³»å°šæœªå®æ–½
5. **å¹¶è¡Œè®¡ç®—** - æ‰¹é‡å¤„ç†æ¡†æ¶å°šæœªå®æ–½

### å¾…å®Œæˆä»»åŠ¡

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | é¢„è®¡å·¥æ—¶ | è¯´æ˜ |
|------|--------|---------|------|
| é›†æˆçœŸå®LLMæœåŠ¡ | é«˜ | 2å¤© | å¯¹æ¥GPT-4/DeepSeek/Qwen |
| å¯¹æ¥å›æµ‹å¼•æ“ | é«˜ | 1å¤© | ä½¿ç”¨ç°æœ‰BacktestEngine |
| æ‰©å±•ç­–ç•¥åº“ | ä¸­ | 3å¤© | å®ç°15+ç­–ç•¥ |
| å®ç°åˆ†å±‚ç¼“å­˜ | ä¸­ | 2å¤© | L1/L2/L3ç¼“å­˜ |
| å®ç°å¹¶è¡Œè®¡ç®— | ä½ | 1å¤© | æ‰¹é‡å¤„ç†ä¼˜åŒ– |
| åé¦ˆæ ¡å‡†æœºåˆ¶ | ä½ | 2å¤© | è§„åˆ™è¿­ä»£ä¼˜åŒ– |

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰

1. **é›†æˆçœŸå®LLMæœåŠ¡**
   - é€‰æ‹©LLMæä¾›å•†ï¼ˆGPT-4/DeepSeek/Qwenï¼‰
   - å®ç°LLMè°ƒç”¨æ¥å£
   - ä¼˜åŒ–Promptæ¨¡æ¿

2. **å¯¹æ¥å›æµ‹å¼•æ“**
   - ä½¿ç”¨ç°æœ‰BacktestEngine
   - å®ç°ç­–ç•¥å†å²å›æµ‹
   - æ”¶é›†å›æµ‹æ•°æ®

3. **æ‰©å±•ç­–ç•¥åº“**
   - å®ç°ä¸‰å‰æˆŸç­–ç•¥
   - å®ç°MACDç­–ç•¥
   - å®ç°å¸ƒæ—å¸¦ç­–ç•¥

### ä¸­æœŸï¼ˆ3-4å‘¨ï¼‰

4. **æ€§èƒ½ä¼˜åŒ–**
   - å®ç°åˆ†å±‚ç¼“å­˜ä½“ç³»
   - å®ç°å¹¶è¡Œè®¡ç®—æ¡†æ¶
   - å‹åŠ›æµ‹è¯•å’Œè°ƒä¼˜

5. **ç›‘æ§å‘Šè­¦**
   - å®ç°ç›‘æ§æŒ‡æ ‡æ”¶é›†
   - å®ç°å‘Šè­¦æœºåˆ¶
   - é›†æˆåˆ°ç›‘æ§å¹³å°

### é•¿æœŸï¼ˆ1-2ä¸ªæœˆï¼‰

6. **åé¦ˆä¼˜åŒ–**
   - å®ç°åé¦ˆæ ¡å‡†æœºåˆ¶
   - æ”¶é›†ç­–ç•¥è¡¨ç°æ•°æ®
   - æŒç»­ä¼˜åŒ–è§„åˆ™

7. **å‰ç«¯é›†æˆ**
   - å¼€å‘ç­–ç•¥é€‰æ‹©é¡µé¢
   - é›†æˆåˆ°åˆ†ææµç¨‹
   - ç”¨æˆ·ä½“éªŒä¼˜åŒ–

---

## ğŸ“Š æˆåŠŸæŒ‡æ ‡

### æŠ€æœ¯æŒ‡æ ‡

- âœ… ä»£ç è¦†ç›–ç‡: 90%+
- âœ… æµ‹è¯•é€šè¿‡ç‡: 100%
- â³ APIå“åº”æ—¶é—´: <100msï¼ˆå¾…å‹æµ‹ï¼‰
- â³ ç³»ç»Ÿå¯ç”¨æ€§: 99.9%ï¼ˆå¾…éƒ¨ç½²ï¼‰

### ä¸šåŠ¡æŒ‡æ ‡

- â³ ç­–ç•¥é€‰æ‹©å‡†ç¡®ç‡: â‰¥55%ï¼ˆå¾…éªŒè¯ï¼‰
- âœ… å†³ç­–ä¸€è‡´ç‡: â‰¥70%
- âœ… è§„åˆ™éµå®ˆç‡: â‰¥95%
- â³ ç”¨æˆ·æ»¡æ„åº¦: â‰¥4.0/5.0ï¼ˆå¾…æ”¶é›†ï¼‰

---

## ğŸ‰ æ€»ç»“

### ä¸»è¦æˆå°±

1. âœ… **æˆåŠŸå€Ÿé‰´èåˆ** - ä»å‚è€ƒæ–‡æ¡£ä¸­æç‚¼å¹¶å®ç°äº†8ä¸ªæ ¸å¿ƒè®¾è®¡ç²¾å
2. âœ… **å»ºç«‹è§„åˆ™ä½“ç³»** - å®ç°äº†å®Œæ•´çš„ä¸‰å±‚è§„åˆ™ä½“ç³»
3. âœ… **å®ç°æ··åˆå†³ç­–** - è§„åˆ™+LLM+å›æµ‹çš„åˆ›æ–°æ¨¡å‹
4. âœ… **ç¡®ä¿æ•°æ®è´¨é‡** - å®Œå–„çš„æ•°æ®éªŒè¯å’Œæ¸…æ´—æœºåˆ¶
5. âœ… **æä¾›å®Œæ•´API** - æ˜“ç”¨çš„REST APIæ¥å£

### æ ¸å¿ƒä»·å€¼

- **å‡†ç¡®æ€§** - ä¸‰å±‚è§„åˆ™ä½“ç³»ç¡®ä¿å†³ç­–è´¨é‡
- **çµæ´»æ€§** - åœºæ™¯åŒ–è§„åˆ™é€‚é…ä¸åŒå¸‚åœº
- **å¯é æ€§** - å†³ç­–ä¸€è‡´æ€§æ ¡éªŒå’Œé™çº§æœºåˆ¶
- **å¯ç»´æŠ¤æ€§** - è§„åˆ™é…ç½®åŒ–ï¼Œæ˜“äºè°ƒæ•´ä¼˜åŒ–
- **å¯æ‰©å±•æ€§** - æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•åŠŸèƒ½

### æŠ€æœ¯äº®ç‚¹

1. **ä¸‰å±‚è§„åˆ™ä½“ç³»** - ä¸šç•Œé¢†å…ˆçš„è§„åˆ™è®¾è®¡
2. **æ··åˆå†³ç­–æ¨¡å‹** - åˆ›æ–°çš„ä¸‰æ­¥éª¤å†³ç­–æµç¨‹
3. **æ•°æ®è´¨é‡ç®¡æ§** - å®Œå–„çš„éªŒè¯å’Œæ¸…æ´—æœºåˆ¶
4. **å†³ç­–ä¸€è‡´æ€§** - ç‹¬ç‰¹çš„ä¸€è‡´æ€§æ ¡éªŒæœºåˆ¶

---

## ğŸ‘¥ å›¢é˜Ÿä¸è‡´è°¢

**å¼€å‘å›¢é˜Ÿ**: InvestMind Pro Team  
**æŠ€æœ¯æ”¯æŒ**: Windsurf AI Assistant  
**å‚è€ƒæ–‡æ¡£**: `1InvestMind-Pro é—­ç¯äº¤æ˜“ç³»ç»Ÿæ•´åˆæ–¹æ¡ˆ`  

ç‰¹åˆ«æ„Ÿè°¢å‚è€ƒæ–‡æ¡£æä¾›çš„å®è´µè®¾è®¡æ€è·¯å’Œå®ç°ç»†èŠ‚ï¼

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-12-15 21:23:00 UTC+8  
**æŠ¥å‘Šç‰ˆæœ¬**: v1.0.0  
**ä¸‹æ¬¡æ›´æ–°**: å¾…LLMé›†æˆå®Œæˆå
