# 快速故障排除指南

## 🚨 常见问题及解决方案

### 1. 端口被占用
**错误**: `[Errno 10048] error while attempting to bind on address ('0.0.0.0', 8000)`

**解决**:
```bash
# 方法1：使用批处理文件
KILL_PORT_8000.bat

# 方法2：完整重启
FULL_RESTART.bat
```

### 2. 前端报错 `change.startsWith is not a function`
**已修复**: `StockDataPanel.vue` 中的涨跌幅处理

**验证**:
- 刷新浏览器（Ctrl+F5）
- 检查控制台是否还有错误

### 3. API配置显示"未配置"
**原因**: 后端已配置但前端未正确读取

**检查步骤**:
1. 运行 `python test_api_status.py`
2. 查看浏览器控制台日志
3. 应看到: `[App] ✅ gemini API已配置`

### 4. 所有连接指示灯都是灰色
**原因**: 后端未启动或端口被占用

**解决**:
```bash
# 完整重启系统
FULL_RESTART.bat
```

## 🔧 快速命令

### 系统检查
```bash
SYSTEM_CHECK.bat
```

### 完整重启
```bash
FULL_RESTART.bat
```

### 测试数据源
```bash
python test_optimized_adapter.py
```

### 测试API状态
```bash
python test_api_status.py
```

## 📋 启动顺序

1. **释放端口**
   ```bash
   KILL_PORT_8000.bat
   ```

2. **启动后端**
   ```bash
   python backend\server.py
   ```

3. **启动前端**
   ```bash
   cd alpha-council-vue
   npm run serve
   ```

## ✅ 正常状态检查清单

- [ ] 后端运行在 http://localhost:8000
- [ ] 前端运行在 http://localhost:8080
- [ ] API文档可访问 http://localhost:8000/docs
- [ ] 连接指示灯显示绿色
- [ ] API配置状态正确显示
- [ ] 无控制台错误
- [ ] 股票数据可正常获取

## 🆘 紧急修复

如果所有方法都失败：

1. **完全停止所有服务**
   ```bash
   taskkill /F /IM python.exe
   taskkill /F /IM node.exe
   ```

2. **清理缓存**
   ```bash
   cd alpha-council-vue
   rm -rf node_modules/.cache
   ```

3. **重新启动**
   ```bash
   FULL_RESTART.bat
   ```

## 📞 调试日志位置

- **后端日志**: 终端窗口
- **前端日志**: 浏览器控制台（F12）
- **网络请求**: 浏览器开发工具 > Network标签

## 💡 提示

1. 始终先检查端口是否被占用
2. 使用 `FULL_RESTART.bat` 可解决90%的问题
3. 清理浏览器缓存有时很有效（Ctrl+Shift+Delete）
4. 查看控制台日志能快速定位问题
